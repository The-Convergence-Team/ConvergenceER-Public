// ==EMEVD==
// @docs    er-common.emedf.json
// @compress    DCX_KRAK
// @game    Sekiro
// @string    "N:\\GR\\data\\Param\\event\\common_func.emevd\u0000N:\\GR\\data\\Param\\event\\common_macro.emevd\u0000\u0000\u0000\u0000\u0000\u0000"
// @linked    [0,82]
// @version    3.4.2
// ==/EMEVD==

$Event(0, Default, function() {
    RegisterBonfire(11000002, 11001952, 0, 0, 0, 5);
    RegisterBonfire(11000003, 11001953, 0, 0, 0, 5);
    RegisterBonfire(11000004, 11001954, 0, 0, 0, 5);
    RegisterBonfire(11000005, 11001955, 0, 0, 0, 5);
    RegisterBonfire(11000006, 11001956, 0, 0, 0, 5);
    RegisterBonfire(11000007, 11001957, 0, 0, 0, 5);
    RegisterBonfire(11000008, 11001958, 0, 0, 0, 5);
    RegisterBonfire(11000009, 11001959, 0, 0, 0, 5);
    InitializeCommonEvent(0, 9005810, 11000500, 11000000, 11000950, 11001950, 1084227584);
    InitializeCommonEvent(0, 9005810, 11000850, 11000001, 11000951, 11001951, 1084227584);
    InitializeCommonEvent(0, 90005300, 11000220, 11000220, 11000975, 0, 0);
    InitializeEvent(0, 11002800, 0);
    InitializeEvent(0, 11002810, 0);
    InitializeEvent(0, 11002811, 0);
    InitializeEvent(0, 11002829, 0);
    InitializeEvent(0, 11002850, 0);
    InitializeCommonEvent(0, 98005300, 11000850); //Sigur Blinding Veil removal
    InitializeEvent(0, 11002860, 0);
    InitializeEvent(0, 11002862, 0);
    InitializeEvent(0, 11002859, 0);
    InitializeEvent(0, 11002900, 0);
    InitializeEvent(0, 11002905, 0); // Headless Abductor
    InitializeEvent(0, 11002888, 11002875, 11001875, 11002875);
    InitializeEvent(1, 11002888, 11002877, 11001877, 11002877);
    InitializeEvent(2, 11002888, 11002879, 11001879, 11002879);
    InitializeEvent(0, 11002889, 0);
    InitializeEvent(0, 11002500, 0);
    InitializeEvent(0, 11002501, 0);
    InitializeEvent(0, 11002502, 0);
    InitializeEvent(0, 11002503, 0);
    InitializeEvent(0, 11002504, 0);
    InitializeCommonEvent(0, 90005501, 11000510, 11000511, 0, 11001510, 11001511, 11001512, 11000512);
    InitializeCommonEvent(0, 90005501, 11000940, 11000941, 0, 11001945, 11001941, 11001942, 11000942);
    InitializeCommonEvent(0, 90005501, 11000515, 11000516, 0, 11001515, 11001516, 11001517, 11000517);
    InitializeCommonEvent(0, 90005501, 11000520, 11000521, 0, 11001520, 11001521, 11001522, 11000522);
    InitializeCommonEvent(0, 90005501, 11000525, 11000526, 0, 11001525, 11001526, 11001527, 11000527);
    InitializeCommonEvent(0, 90005501, 11000530, 11000531, 0, 11001530, 11001531, 11001532, 11000532);
    InitializeCommonEvent(0, 90005501, 11000535, 11000536, 1, 11001535, 0, 11001537, 11000537);
    InitializeCommonEvent(0, 90005501, 11000610, 11000611, 2, 11001610, 11001611, 11001612, 11000612);
    InitializeEvent(0, 11002510, 0);
    InitializeEvent(0, 11000602, 0);
    InitializeCommonEvent(0, 90005513, 11000540, 11001540, 11001541, 11003541, 1227050, 1, 2);
    InitializeEvent(0, 11002546, 11000546, 11001546, 11001547, 11003547, 1227050, 1, 2);
    InitializeEvent(0, 11002547, 0);
    InitializeCommonEvent(0, 90005511, 11000560, 11001560, 11003560, 227010, 0);
    InitializeCommonEvent(0, 90005512, 11000560, 11002560, 11002561);
    InitializeCommonEvent(0, 90005511, 11000562, 11001562, 11003562, 227010, 0);
    InitializeCommonEvent(0, 90005512, 11000562, 11002562, 11002563);
    InitializeCommonEvent(0, 90005511, 11000564, 11001564, 11003564, 227070, 0);
    InitializeEvent(0, 11002540, 0);
    //InitializeEvent(0, 11000600, 0);
    InitializeEvent(0, 11002601, 0);
    InitializeEvent(0, 11002603, 0);
    InitializeEvent(0, 11002580, 0);
    InitializeCommonEvent(0, 90005520, 11000576, 11001576, 11002576, 11002577);
    InitializeCommonEvent(0, 90005520, 11000578, 11001578, 11002578, 11002579);
    InitializeEvent(0, 11002690, 0);
    InitializeEvent(0, 11002691, 11001691);
    InitializeCommonEvent(0, 90005605, 11001692, 3874, 34152692, 11000000, 11002692, 11002693, 11002694, 11000600, 30040, 0, 0);
    InitializeCommonEvent(0, 90005632, 580050, 11001695, 80050);
    InitializeCommonEvent(0, 90005570, 60822, 52, 11001391, 0, 1, 0);
    
    //Tutorial Handler: Duels
    //InitializeEvent(0, 11002698, 0);
    
    //Tutorial Handler: Marika's Effigy at Roundtable
    //InitializeEvent(0, 11002697, 0);
    
    InitializeEvent(0, 11002699, 0);
    InitializeEvent(0, 11002604, 0);
    InitializeEvent(0, 11002203, 11000203, 11002216);
    InitializeEvent(0, 11002205, 11000203, 11002215);
    InitializeEvent(0, 11002207, 11000203, 11002216);
    InitializeEvent(0, 11002209, 11000203, 11002215);
    InitializeEvent(1, 11002203, 11000205, 11002218);
    InitializeEvent(1, 11002205, 11000205, 11002217);
    InitializeEvent(1, 11002207, 11000205, 11002218);
    InitializeEvent(1, 11002209, 11000205, 11002217);
    InitializeEvent(5, 11002260, 11000265, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(6, 11002260, 11000266, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(7, 11002260, 11000267, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(8, 11002260, 11000268, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(9, 11002260, 11000269, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(10, 11002260, 11000270, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(11, 11002260, 11000271, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(12, 11002260, 11000272, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(13, 11002260, 11000273, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(14, 11002260, 11000274, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(15, 11002260, 11000275, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(16, 11002260, 11000276, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(17, 11002260, 11000277, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(18, 11002260, 11000278, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(19, 11002260, 11000279, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(20, 11002260, 11000280, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(21, 11002260, 11000281, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(22, 11002260, 11000282, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(23, 11002260, 11000283, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(24, 11002260, 11000284, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(25, 11002260, 11000285, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(26, 11002260, 11000286, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(27, 11002260, 11000287, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(28, 11002260, 11000288, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeEvent(29, 11002260, 11000289, 30000, 20000, 0, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005300, 11000896, 11000896, 11001187, 1073741824, 0);
    InitializeEvent(2, 11002402, 11000252, 30000, 20000, 11002243, 0, 0, 1, 0, 0, 1);
    InitializeEvent(0, 11002402, 11000254, 30000, 20000, 11002254, 1073741824, 0, 1, 0, 0, 1);
    InitializeEvent(1, 11002402, 11000259, 30000, 20000, 11002259, 0, 0, 1, 1, 1, 1);
    InitializeEvent(0, 11002317, 11000408, 11002359, 0, 1084227584);
    InitializeEvent(1, 11002317, 11000420, 11002359, 0, 1092616192);
    InitializeCommonEvent(0, 90005300, 11000389, 11000389, 11001198, 0, 0);
    InitializeCommonEvent(0, 90005300, 11000399, 11000399, 11000185, 0, 0);
    InitializeCommonEvent(0, 90005300, 11000495, 11000495, 0, 0, 0);
    InitializeCommonEvent(0, 90005300, 11000496, 11000496, 0, 0, 0);
    InitializeEvent(0, 11002497, 11000497, 11002497, 0);
    InitializeCommonEvent(0, 90005300, 11000497, 11000497, 11001193, 0, 0);
    InitializeEvent(4, 11002402, 11000397, 30001, 20001, 11002625, 0, 0, 1, 1, 1, 1);
    InitializeCommonEvent(0, 90005300, 11000498, 11000498, 0, 1073741824, 0);
    InitializeCommonEvent(0, 90005300, 11000499, 11000499, 11000195, 0, 0);
    InitializeCommonEvent(0, 90005300, 11000484, 11000484, 0, 0, 0);
    InitializeCommonEvent(0, 90005300, 11000665, 11000665, 40360, 0, 0);
    InitializeCommonEvent(0, 90005300, 11000666, 11000666, 40372, 0, 0);
    InitializeCommonEvent(0, 90005300, 11000667, 11000667, 40374, 0, 0);
    InitializeCommonEvent(0, 90005300, 11000299, 11000299, 11001000, 0, 0);
    InitializeCommonEvent(0, 9005811, 11000850, 11001930, 5, 0);
    InitializeCommonEvent(0, 9005811, 11000850, 11001931, 5, 0);
    InitializeCommonEvent(0, 9005811, 11000850, 11001932, 5, 0);
    InitializeCommonEvent(0, 90005795, 7605, 0, 11009500, 11002141, 11002142, 80605, 9000, 11001710, 30010);
    if (CeremonyActive(20)) {
        InitializeEvent(0, 11002155, 7605, 11000740, 11000745, 5, 11002141);
        InitializeEvent(0, 11002145, 0);
    }
    InitializeCommonEvent(0, 90005780, 11000800, 11002164, 11002165, 11000730, 20, 11002164, 0, 1, 0);
    InitializeCommonEvent(0, 90005781, 11000800, 11002164, 11002165, 11000730);
    InitializeCommonEvent(0, 90005782, 11002164, 11002805, 11000730, 11002800, 11002809, 20029);
    InitializeCommonEvent(0, 90005780, 11000800, 11002168, 11002169, 11000760, 20, 11002761, 35009317, 1, 0);
    InitializeCommonEvent(0, 90005781, 11000800, 11002168, 11002169, 11000760);
    InitializeCommonEvent(0, 90005782, 11002168, 11002805, 11000760, 11002800, 11002809, 0);
    InitializeCommonEvent(0, 90005703, 11000710, 3941, 3942, 1039409251, 3941, 3940, 3943, 0);
    InitializeCommonEvent(0, 90005704, 11000710, 3941, 3940, 1039409251, 3);
    InitializeCommonEvent(0, 90005702, 11000710, 3943, 3940, 3944);
    InitializeEvent(0, 11003710, 11000710);
    InitializeEvent(0, 11003711, 11000710);
    InitializeEvent(0, 11003715, 11000720);
    InitializeEvent(0, 11003720, 11000725);
    InitializeCommonEvent(0, 90005704, 11000725, 4201, 4200, 11009451, 3);
    InitializeCommonEvent(0, 90005703, 11000725, 4201, 4202, 11009451, 4201, 4200, 4204, -1);
    InitializeCommonEvent(0, 90005702, 11000725, 4203, 4200, 4204);
    InitializeEvent(0, 11003721, 11000715);
    InitializeEvent(0, 11003722, 11000715);
    InitializeEvent(0, 11003723, 11000716);
    InitializeEvent(0, 11003724, 0);
    InitializeEvent(0, 11003725, 11000705);
    InitializeCommonEvent(0, 90005701, 11000705, 4701, 4702, 11009301, 3);
    InitializeCommonEvent(0, 90005700, 11000705, 4701, 4702, 11009301, 1059481190, 4700, 4704, -1);
    InitializeCommonEvent(0, 90005702, 11000705, 4703, 4700, 4704);
    InitializeEvent(0, 11003730, 0);
    InitializeCommonEvent(0, 90005774, 7605, 11001985, 11001985);
    InitializeEvent(0, 11003740, 0);
    InitializeEvent(0, 11003741, 0);
    InitializeCommonEvent(0, 90005771, 11000957, 11002740);
    InitializeCommonEvent(0, 90005771, 11000952, 11002741);
    InitializeCommonEvent(0, 90005771, 11000953, 11002742);
    InitializeCommonEvent(0, 90005771, 11000954, 11002743);
    InitializeCommonEvent(0, 90005771, 11000955, 11002744);
    InitializeCommonEvent(0, 90005775, 85495300, 11109687, -1082130432);
    InitializeEvent(0, 11003750, 0); //Award Goldmask Set during quest
    SetEventFlagID(11000576, ON);
    InitializeEvent(0, 11003760, 11000902, 11002902, 3005, 171);
    InitializeEvent(0, 11003751, 11000418, 11002355);
    InitializeEvent(1, 11003751, 11000689, 11002689);
    InitializeEvent(2, 11003751, 11000228, 11002219);
    InitializeEvent(3, 11003751, 11000229, 11002229);
    InitializeEvent(4, 11003751, 11000231, 11002231);
    InitializeEvent(5, 11003751, 11000232, 11002232);
    InitializeEvent(6, 11003751, 11000220, 11002220);
    InitializeEvent(7, 11003751, 11000233, 11002233);
    InitializeEvent(8, 11003751, 11000234, 11002234);
    InitializeEvent(9, 11003751, 11000486, 11002486);
    InitializeEvent(10, 11003751, 11000487, 11002487);
    InitializeEvent(11, 11003751, 11000491, 11002491);
    InitializeEvent(12, 11003751, 11000895, 11002895);
    InitializeEvent(13, 11003751, 11000394, 11002394);
    InitializeEvent(14, 11003751, 11000896, 11002896);
    InitializeEvent(15, 11003751, 11000897, 11002897);
    InitializeEvent(16, 11003751, 11000898, 11002898);
    InitializeEvent(17, 11003751, 11000899, 11002899);
    InitializeEvent(18, 11003751, 11000901, 11002901);
    InitializeEvent(19, 11003751, 11000902, 11002902);
    InitializeEvent(0, 11003770, 11008300, 11008301, 11008302);
    
    // Cult NPC
    InitializeCommonEvent(0, 90005250, 11000726, 11002410, 0, -1);
    InitializeCommonEvent(0, 90005300, 11000726, 11000726, 108100, 0, 0);
    
    // Honse
    InitializeEvent(0, 11003780, 0);
});

$Event(50, Default, function() {
    SetCharacterBackreadState(11000705, true);
    SetCharacterBackreadState(11000710, true);
    SetCharacterBackreadState(11000715, true);
    SetCharacterBackreadState(11000720, true);
    SetCharacterBackreadState(11000725, true);
    SetCharacterBackreadState(11000735, true);
    SetCharacterBackreadState(11000740, true);
    SetCharacterBackreadState(11000745, true);
    DisableCharacterHPBarDisplay(11000750);
    InitializeEvent(0, 11000519, 0);
    InitializeCommonEvent(0, 90005201, 11000200, 30000, 20000, 1097859072, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 11000201, 30000, 20000, 11002202, 1092616192, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 11000202, 30000, 20000, 11002202, 1092616192, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005221, 11000204, 30000, 20000, 0, 0);
    InitializeCommonEvent(0, 90005250, 11000206, 11002208, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000207, 11002208, 0, -1);
    InitializeCommonEvent(0, 90005211, 11000208, 30000, 20000, 11002208, 1084227584, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000220, 30010, 20010, 11002220, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000221, 30010, 20010, 11002220, 1065353216, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005250, 11000222, 11002222, 0, 3004);
    InitializeCommonEvent(0, 90005200, 11000223, 30010, 20010, 11002223, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000224, 30010, 20010, 11002224, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000225, 30010, 20010, 11002224, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000226, 30010, 20010, 11002226, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000227, 30002, 20002, 11002227, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000209, 30000, 20000, 11002393, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000210, 30000, 20000, 11002393, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000211, 30000, 20000, 11002393, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005250, 11000212, 11002212, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000213, 11002212, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000214, 11002212, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000240, 11002240, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000246, 11002246, 0, -1);
    InitializeCommonEvent(0, 90005210, 11000242, 30000, 20000, 11002242, 1092616192, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005250, 11000243, 11002243, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000244, 11002244, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000247, 11002247, 0, 3012);
    InitializeCommonEvent(0, 90005250, 11000248, 11002248, 0, -1);
    InitializeCommonEvent(0, 90005200, 11000250, 30000, 20000, 11002250, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005250, 11000252, 11002243, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000253, 11002243, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000255, 11002255, 0, -1);
    InitializeCommonEvent(0, 90005200, 11000256, 30002, 20002, 11002256, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000257, 30002, 20002, 11002625, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005250, 11000258, 11002625, 0, -1);
    InitializeCommonEvent(0, 90005200, 11000345, 30000, 20000, 11002345, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005261, 11000346, 11002496, 1091567616, 0, -1);
    InitializeCommonEvent(0, 90005200, 11000341, 30000, 20000, 11002340, 1065353216, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000342, 30000, 20000, 11002340, 1073741824, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000343, 30000, 20000, 11002340, 1069547520, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005250, 11000291, 11002330, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000292, 11002330, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000293, 11002330, 0, -1);
    InitializeCommonEvent(0, 90005221, 11000375, 30000, 20000, 0, 0);
    InitializeCommonEvent(0, 90005221, 11000376, 30000, 20000, 0, 0);
    InitializeCommonEvent(0, 90005221, 11000377, 30001, 20001, 0, 0);
    InitializeCommonEvent(0, 90005221, 11000378, 30000, 20000, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000390, 30000, 20000, 11002390, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005261, 11000391, 11002206, 1065353216, 0, 0);
    InitializeCommonEvent(0, 90005250, 11000392, 11002230, 0, -1);
    InitializeCommonEvent(0, 90005200, 11000393, 30000, 20000, 11002393, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005250, 11000394, 11002394, 0, -1);
    InitializeCommonEvent(0, 90005200, 11000300, 30000, 20000, 11002401, 1065353216, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000301, 30010, 20010, 11002353, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005250, 11000302, 11002353, 0, -1);
    InitializeCommonEvent(0, 90005200, 11000303, 30010, 20010, 11002358, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000304, 30010, 20010, 11002358, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005250, 11000311, 11002407, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000312, 11002407, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000313, 11002259, 0, -1);
    InitializeCommonEvent(0, 90005200, 11000314, 30010, 20010, 11002259, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000320, 30010, 20010, 11002410, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005250, 11000321, 11002410, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000322, 11002410, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000323, 11002410, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000324, 11002410, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000325, 11002410, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000326, 11002326, 0, 3011);
    InitializeCommonEvent(0, 90005250, 11000327, 11002327, 0, 3012);
    InitializeCommonEvent(0, 90005200, 11000350, 30002, 20002, 11002350, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005250, 11000351, 11002350, 0, -1);
    InitializeCommonEvent(0, 90005200, 11000352, 30002, 20002, 11002259, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005250, 11000353, 11002353, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000354, 11002354, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000355, 11002354, 0, -1);
    InitializeCommonEvent(0, 90005211, 11000356, 30003, 20003, 0, 1092616192, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005211, 11000357, 30004, 20004, 0, 1092616192, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005250, 11000358, 11002358, 0, -1);
    InitializeCommonEvent(0, 90005211, 11000359, 30004, 20004, 11002359, 1084227584, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005250, 11000360, 11002360, 0, -1);
    InitializeCommonEvent(0, 90005200, 11000361, 30003, 20003, 11002359, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005250, 11000364, 11002405, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000365, 11002405, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000367, 11002407, 0, -1);
    InitializeCommonEvent(0, 90005201, 11000400, 30000, 20000, 1097859072, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005250, 11000401, 11002401, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000404, 11002404, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000416, 11002405, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000406, 11002406, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000407, 11002407, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000409, 11002405, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000410, 11002410, 0, -1);
    InitializeCommonEvent(0, 90005200, 11000411, 11002411, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005250, 11000412, 11002412, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000413, 11002413, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000414, 11002414, 0, 3010);
    InitializeCommonEvent(0, 90005250, 11000415, 11002415, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000405, 30001, 20001, 11002416, 1065353216, -1);
    InitializeCommonEvent(0, 90005250, 11000417, 11002416, 0, -1);
    InitializeCommonEvent(0, 90005210, 11000389, 30000, 20000, 11002389, 1108082688, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005250, 11000493, 11002493, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000494, 11002494, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000495, 11002495, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000496, 11002496, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000430, 11002430, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000864, 11002864, 0, -1);
    InitializeCommonEvent(0, 90005200, 11000431, 30000, 20000, 11002431, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000433, 30001, 20001, 11002433, 1069547520, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000434, 30002, 20002, 11002433, 1086324736, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000436, 30002, 20002, 11002435, 1056964608, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005201, 11000437, 30005, 20005, 1084227584, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000439, 30001, 20001, 11002435, 1069547520, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000440, 30005, 20005, 11002295, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005201, 11000443, 30005, 20005, 1084227584, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005221, 11000444, 30006, 20006, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000295, 30001, 20001, 11002295, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000296, 30001, 20001, 11002295, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000297, 30018, 20018, 11002297, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005250, 11000450, 11002455, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000451, 11002455, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000455, 11002471, 0, 0);
    InitializeCommonEvent(0, 90005250, 11000459, 11002471, 0, 3009);
    InitializeCommonEvent(0, 90005250, 11000469, 11002469, 0, -1);
    InitializeCommonEvent(0, 90005211, 11000425, 11002425, 1077936128, 1065353216, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005201, 11000426, 30005, 20005, 1073741824, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 11000427, 30004, 20004, 11002425, 1077936128, 1077936128, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 11000428, 11002425, 1077936128, 1077936128, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 11000464, 30000, 20000, 11002464, 1073741824, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005211, 11000465, 30004, 20004, 11002464, 1073741824, 1073741824, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000470, 30001, 20001, 11002470, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000471, 11002471, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000472, 30003, 20003, 11002466, 1069547520, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000473, 11002466, 1075838976, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000475, 30005, 20005, 11002480, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000476, 30003, 20003, 11002476, 1056964608, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000477, 30001, 20001, 11002476, 1065353216, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000478, 30005, 20005, 11002480, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000480, 30003, 20003, 11002480, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000620, 30001, 20001, 11002620, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000621, 30001, 20001, 11002620, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000625, 30003, 20003, 11002625, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000626, 30002, 20002, 11002625, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005250, 11000627, 11002625, 0, -1);
    InitializeCommonEvent(0, 90005261, 11000630, 11002630, 1073741824, 0, -1);
    InitializeCommonEvent(0, 90005200, 11000631, 30000, 20000, 11002631, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000632, 30000, 20000, 11002631, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005221, 11000636, 30006, 20006, 0, 0);
    InitializeCommonEvent(0, 90005221, 11000637, 30006, 20006, 0, 0);
    InitializeCommonEvent(0, 90005221, 11000638, 30005, 20005, 0, 0);
    InitializeCommonEvent(0, 90005221, 11000639, 30004, 20004, 0, 0);
    InitializeCommonEvent(0, 90005221, 11000640, 30005, 20005, 0, 0);
    InitializeCommonEvent(0, 90005221, 11000641, 30005, 20005, 0, 0);
    InitializeCommonEvent(0, 90005221, 11000642, 30006, 20006, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000645, 30001, 20001, 11002645, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000395, 30000, 20000, 11002631, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005221, 11000396, 30005, 20005, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000398, 30000, 20000, 11002398, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000650, 30000, 20000, 11002650, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005250, 11000651, 11002650, 0, -1);
    InitializeCommonEvent(0, 90005200, 11000481, 30000, 20000, 11002650, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005201, 11000653, 30000, 20000, 1092616192, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005201, 11000654, 30000, 20000, 1092616192, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000656, 30000, 20000, 11002645, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005261, 11000657, 11002645, 1084227584, 0, -1);
    InitializeCommonEvent(0, 90005251, 11000658, 1077936128, 0, -1);
    InitializeCommonEvent(0, 90005200, 11000482, 30001, 20001, 11002398, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005251, 11000663, 1097859072, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000482, 11002488, 0, -1);
    InitializeCommonEvent(0, 90005201, 11000670, 30000, 20000, 1065353216, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005201, 11000671, 30000, 20000, 1065353216, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000672, 30000, 20000, 11002672, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005201, 11000675, 30000, 20000, 1065353216, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005201, 11000676, 30000, 20000, 1065353216, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000681, 30001, 20001, 11002681, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005200, 11000682, 30001, 20001, 11002682, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005201, 11000683, 30001, 20001, 1097859072, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005201, 11000685, 30000, 20000, 1065353216, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005250, 11000486, 11002486, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000488, 11002488, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000489, 11002499, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000498, 11002498, 0, -1);
    InitializeCommonEvent(0, 90005200, 11000399, 30000, 20000, 11002256, 0, 0, 1, 0, 0);
    InitializeCommonEvent(0, 90005250, 11000499, 11002499, 0, -1);
    InitializeCommonEvent(0, 90005251, 11000484, 1092616192, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000665, 11002496, 0, -1);
    InitializeCommonEvent(0, 90005250, 11000666, 11002425, 0, -1);
    InitializeCommonEvent(0, 90005200, 11000688, 30000, 20000, 11002688, 0, 0, 0, 0, 0);
    //Rooftop killbox
    InitializeCommonEvent(0, 9005999, 11002417);
    SetEventFlagID(11008542, ON);
    if (!EventFlag(11008544)) {
        SetEventFlagID(11008544, ON);
    }
});

$Event(11002500, Default, function() {
    EndIf(!PlayerIsInOwnWorld());
    WaitFor(PlayerIsInOwnWorld() && ActionButtonInArea(9500, 11001500));
    DisplayGenericDialog(20000, PromptType.YESNO, NumberofOptions.NoButtons, 11001500, 3);
    SetEventFlagID(11000500, ON);
    WaitFixedTimeSeconds(3);
    RestartEvent();
});

$Event(11002501, Default, function() {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(EventFlag(11000501));
    WaitFor(EventFlag(11000800) && !EventFlag(11000501));
    SetSpEffect(10000, 4280);
    SetSpEffect(10000, 4282);
    WaitFor(EventFlag(11000800) && EventFlag(11000500) && EventFlag(9000));
    SetSpEffect(10000, 4281);
    SetSpEffect(10000, 4283);
    SetEventFlagID(11000501, ON);
    RestartEvent();
});

$Event(11002502, Default, function() {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(EventFlag(11000500));
    WaitFor(EventFlag(11002802) || (EventFlag(11000800) && PlayerInMap(11, 0, 0, 0)));
    ChangeWeather(Weather.Rain, -1, false);
    WaitFixedTimeSeconds(3);
    WaitFor(!(EventFlag(11002802) || (EventFlag(11000800) && PlayerInMap(11, 0, 0, 0))));
    ChangeWeather(Weather.None, -1, false);
    WaitFixedTimeSeconds(3);
    RestartEvent();
});

$Event(11002503, Default, function() {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(EventFlag(11000501));
    WaitFor(
        PlayerIsInOwnWorld()
            && EventFlag(11000800)
            && !EventFlag(11000501)
            && ActionButtonInArea(10000, 11001800)
            && !(HasMultiplayerState(MultiplayerState.Multiplayer)
                || HasMultiplayerState(MultiplayerState.MultiplayerPending)));
    RotateCharacter(10000, 11002800, 60060, true);
    SendInvadingPhantomsHome(0);
    RestartEvent();
});

$Event(11002504, Default, function() {
    DisableHit(11001401); // Visible Piece
    DisableMapPart(11001402); // Collision Only
    
    DisableMapPart(11004100);
    DisableMapPart(11004101);
    DisableMapPart(11004102);
    DisableMapPart(11004103);
    DisableMapPart(11004104);
    
    EndEvent();
});

$Event(11000519, Default, function() {
    if (EventFlag(300)) {
        SetEventFlagID(11000530, ON);
    }
    EndIf(ThisEventSlot());
    SetEventFlagID(11000510, ON);
    SetEventFlagID(11000520, ON);
    SetEventFlagID(11000525, ON);
});

$Event(11000602, Default, function() {
    EndIf(!EventFlag(300));
    DisableObjAct(11001531, -1);
    WaitFor(EventFlag(300) && ActionButtonInArea(8320, 11001530));
    DisplayGenericDialog(99995010, PromptType.OKCANCEL, NumberofOptions.OneButton, 11001530, 3);
    WaitFixedTimeSeconds(1);
    RestartEvent();
});

$Event(11002145, Restart, function() {
    EndIf(!CeremonyActive(20));
    SetCharacterBackreadState(11000740, false);
    SetCharacterBackreadState(11000745, false);
    SetCharacterBackreadState(11000735, false);
    SetCharacterTeamType(11000740, TeamType.Human);
    SetCharacterTeamType(11000745, TeamType.Human);
    SetCharacterTeamType(11000735, TeamType.Enemy);
    DeleteAssetfollowingSFX(11006700, true);
    CreateAssetfollowingSFX(11006700, 200, 806700);
});

$Event(11002155, Restart, function(X0_4, X4_4, X8_4, X12_1, X16_4) {
    DisableNetworkSync();
    EndIf(PlayerIsInOwnWorld());
    EndIf(EventFlag(X0_4));
    WaitFor(CharacterDead(X4_4) && CharacterDead(X8_4));
    SetEventFlagID(X0_4, ON);
    DisplayBanner(X12_1);
    if (X16_4 != 0) {
        SetPsuedoMultiplayerReturnPosition(X16_4);
    }
    SetSpEffect(20000, 4821);
    IssueEndOfPseudoMultiplayerNotification(true);
});

$Event(11002203, Restart, function(X0_4, X4_4) {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(CharacterHPValue(X0_4) <= 0);
    WaitFor(
        InArea(X0_4, X4_4)
            && ((CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
                || CharacterType(10000, TargetType.Alive)
                || CharacterType(10000, TargetType.GrayPhantom)
                || CharacterType(10000, TargetType.WhitePhantom)));
    SetNetworkconnectedEventFlagID(X4_4, ON);
    WaitFixedTimeSeconds(8);
    SetNetworkconnectedEventFlagID(X4_4, OFF);
    RestartEvent();
});

$Event(11002205, Restart, function(X0_4, X4_4) {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(CharacterHPValue(X0_4) <= 0);
    WaitFor(
        InArea(X0_4, X4_4)
            && ((CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
                || CharacterType(10000, TargetType.Alive)
                || CharacterType(10000, TargetType.GrayPhantom)
                || CharacterType(10000, TargetType.WhitePhantom)));
    SetNetworkconnectedEventFlagID(X4_4, ON);
    WaitFixedTimeSeconds(8);
    SetNetworkconnectedEventFlagID(X4_4, OFF);
    RestartEvent();
});

$Event(11002207, Restart, function(X0_4, X4_4) {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(CharacterHPValue(X0_4) <= 0);
    WaitFor(EventFlag(X4_4));
    WaitFixedTimeSeconds(0.9);
    ForceAnimationPlayback(X0_4, 30002, true, false, false);
    WaitFixedTimeSeconds(8);
    RestartEvent();
});

$Event(11002209, Restart, function(X0_4, X4_4) {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(CharacterHPValue(X0_4) <= 0);
    WaitFor(EventFlag(X4_4));
    WaitFixedTimeSeconds(0.9);
    ForceAnimationPlayback(X0_4, 30001, true, false, false);
    WaitFixedTimeSeconds(8);
    RestartEvent();
});

$Event(11002260, Restart, function(X0_4, X4_4, X8_4, X12_4, X16_4, X20_4, X24_4, X28_4, X32_4) {
    EndIf(SpecialStandbyEndedFlag(X0_4));
    if (X16_4 != 0) {
        DisableCharacterGravity(X0_4);
        SetCharacterMaphit(X0_4, false);
    }
    ForceAnimationPlayback(X0_4, X4_4, true, false, false);
    chrSp = (CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
        || CharacterType(10000, TargetType.Alive)
        || CharacterType(10000, TargetType.GrayPhantom)
        || CharacterType(10000, TargetType.WhitePhantom);
    spChr &= (CharacterHasSpEffect(X0_4, 14405) || CharacterHasSpEffect(X0_4, 14406))
        && CharacterBackreadStatus(X0_4)
        && (CharacterHasSpEffect(X0_4, 5080) || CharacterHasSpEffect(X0_4, 5450));
    if (!(X20_4 == 0 && X24_4 == 0 && X28_4 == 0 && X32_4 == 0)) {
        if (X20_4 != 0) {
            chr |= CharacterAIState(X0_4, AIStateType.Combat);
        }
        if (X24_4 != 0) {
            chr |= CharacterAIState(X0_4, AIStateType.ActiveAlert);
        }
        if (X28_4 != 0) {
            chr |= CharacterAIState(X0_4, AIStateType.PassiveAlert);
        }
        spChr &= chr;
    }
L9:
    sp = CharacterHasSpEffect(X0_4, 481)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90110)
        && !CharacterHasSpEffect(X0_4, 90160);
    sp2 = CharacterHasSpEffect(X0_4, 482)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90120)
        && !CharacterHasSpEffect(X0_4, 90160)
        && !CharacterHasSpEffect(X0_4, 90162);
    sp3 = CharacterHasSpEffect(X0_4, 483)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90140)
        && !CharacterHasSpEffect(X0_4, 90160)
        && !CharacterHasSpEffect(X0_4, 90161);
    sp4 = CharacterHasSpEffect(X0_4, 484)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90130)
        && !CharacterHasSpEffect(X0_4, 90161)
        && !CharacterHasSpEffect(X0_4, 90162);
    sp5 = CharacterHasSpEffect(X0_4, 487)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90150)
        && !CharacterHasSpEffect(X0_4, 90160);
    spChr &= chrSp;
    WaitFor(
        spChr
            || HasDamageType(X0_4, 0, DamageType.Unspecified)
            || CharacterHasStateInfo(X0_4, 436)
            || CharacterHasStateInfo(X0_4, 2)
            || CharacterHasStateInfo(X0_4, 5)
            || CharacterHasStateInfo(X0_4, 6)
            || CharacterHasStateInfo(X0_4, 260)
            || sp
            || sp2
            || sp3
            || sp4
            || sp5);
    WaitFixedTimeSeconds(0.1);
    SetNetworkconnectedThisEventSlot(ON);
    SetSpecialStandbyEndedFlag(X0_4, ON);
    if (!(!CharacterHasSpEffect(X0_4, 5080) && !CharacterHasSpEffect(X0_4, 5450))) {
        WaitFixedTimeSeconds(X12_4);
        if (X16_4 != 0) {
            EnableCharacterGravity(X0_4);
            SetCharacterMaphit(X0_4, true);
        }
        ForceAnimationPlayback(X0_4, X8_4, true, false, false);
        EndEvent();
    }
L0:
    if (X16_4 != 0) {
        EnableCharacterGravity(X0_4);
        SetCharacterMaphit(X0_4, true);
    }
    EndEvent();
});

$Event(11002317, Restart, function(X0_4, X4_4, X8_4, X12_4) {
    EndIf(ThisEventSlot());
    DisableCharacterAI(X0_4);
    chrSp = (CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
        || CharacterType(10000, TargetType.Alive)
        || CharacterType(10000, TargetType.GrayPhantom)
        || CharacterType(10000, TargetType.WhitePhantom);
    areaSp = (EntityInRadiusOfEntity(10000, X0_4, X12_4, 1) || CharacterHasSpEffect(10000, 10004))
        && InArea(10000, X4_4);
    sp = CharacterHasSpEffect(X0_4, 481)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90110)
        && !CharacterHasSpEffect(X0_4, 90160);
    sp2 = CharacterHasSpEffect(X0_4, 482)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90120)
        && !CharacterHasSpEffect(X0_4, 90160)
        && !CharacterHasSpEffect(X0_4, 90162);
    sp3 = CharacterHasSpEffect(X0_4, 483)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90140)
        && !CharacterHasSpEffect(X0_4, 90160)
        && !CharacterHasSpEffect(X0_4, 90161);
    sp4 = CharacterHasSpEffect(X0_4, 484)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90130)
        && !CharacterHasSpEffect(X0_4, 90161)
        && !CharacterHasSpEffect(X0_4, 90162);
    sp5 = CharacterHasSpEffect(X0_4, 487)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90150)
        && !CharacterHasSpEffect(X0_4, 90160);
    areaSpChr = areaSp && chrSp;
    WaitFor(
        HasDamageType(X0_4, 0, DamageType.Unspecified)
            || CharacterHasStateInfo(X0_4, 436)
            || CharacterHasStateInfo(X0_4, 2)
            || CharacterHasStateInfo(X0_4, 5)
            || CharacterHasStateInfo(X0_4, 6)
            || CharacterHasStateInfo(X0_4, 260)
            || areaSpChr
            || sp
            || sp2
            || sp3
            || sp4
            || sp5);
    SetNetworkconnectedThisEventSlot(ON);
    if (areaSpChr.Passed) {
        WaitFixedTimeSeconds(X8_4);
    }
L1:
    EnableCharacterAI(X0_4);
});

$Event(11002360, Restart, function(X0_4, X4_4, X8_4, X12_4, X16_4, X20_4, X24_4, X28_4, X32_4, X36_4) {
    EndIf(SpecialStandbyEndedFlag(X0_4));
    if (X24_4 != 0) {
        DisableCharacterGravity(X0_4);
        SetCharacterMaphit(X0_4, false);
    }
    ForceAnimationPlayback(X0_4, X4_4, true, false, false);
    chrSp = (CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
        || CharacterType(10000, TargetType.Alive)
        || CharacterType(10000, TargetType.GrayPhantom)
        || CharacterType(10000, TargetType.WhitePhantom);
    areaSpChr &= ((EntityInRadiusOfEntity(10000, X0_4, X16_4, 1) || CharacterHasSpEffect(10000, 10000))
        && InArea(10000, X12_4))
        && CharacterBackreadStatus(X0_4)
        && (CharacterHasSpEffect(X0_4, 5080) || CharacterHasSpEffect(X0_4, 5450));
    if (!(X28_4 == 0 && X32_4 == 0 && X36_4 == 0)) {
        if (X28_4 != 0) {
            chr |= CharacterAIState(X0_4, AIStateType.Combat);
        }
        if (X32_4 != 0) {
            chr |= CharacterAIState(X0_4, AIStateType.ActiveAlert);
        }
        if (X36_4 != 0) {
            chr |= CharacterAIState(X0_4, AIStateType.PassiveAlert);
        }
        areaSpChr &= chr;
    }
L9:
    areaSpChr &= chrSp;
    WaitFor(
        areaSpChr
            || HasDamageType(X0_4, 0, DamageType.Unspecified)
            || CharacterHasStateInfo(X0_4, 436)
            || CharacterHasStateInfo(X0_4, 2)
            || CharacterHasStateInfo(X0_4, 5)
            || CharacterHasStateInfo(X0_4, 6)
            || CharacterHasStateInfo(X0_4, 260));
    WaitFixedTimeSeconds(0.1);
    SetNetworkconnectedThisEventSlot(ON);
    SetSpecialStandbyEndedFlag(X0_4, ON);
    if (!(!CharacterHasSpEffect(X0_4, 5080) && !CharacterHasSpEffect(X0_4, 5450))) {
        WaitFixedTimeSeconds(X20_4);
        if (X24_4 != 0) {
            EnableCharacterGravity(X0_4);
            SetCharacterMaphit(X0_4, true);
        }
        ForceAnimationPlayback(X0_4, X8_4, true, false, false);
        EndEvent();
    }
L0:
    if (X24_4 != 0) {
        EnableCharacterGravity(X0_4);
        SetCharacterMaphit(X0_4, true);
    }
    EndEvent();
});

$Event(11002370, Restart, function(X0_4) {
    ForceCharacterDeath(X0_4, false);
});

$Event(11002397, Restart, function(X0_4, X4_4, X8_4) {
    EndIf(ThisEventSlot());
    ForceAnimationPlayback(X0_4, 30001, true, false, false);
    chrSp = (CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
        || CharacterType(10000, TargetType.Alive)
        || CharacterType(10000, TargetType.GrayPhantom)
        || CharacterType(10000, TargetType.WhitePhantom);
    chrArea = (CharacterAIState(11000257, AIStateType.Combat)
        || CharacterAIState(11000258, AIStateType.Combat)
        || CharacterAIState(11000625, AIStateType.Combat)
        || CharacterAIState(11000626, AIStateType.Combat)
        || CharacterAIState(11000627, AIStateType.Combat))
        && InArea(10000, X4_4);
    chrAreaSp = chrArea && chrSp;
    WaitFor(
        HasDamageType(X0_4, 0, DamageType.Unspecified)
            || CharacterAIState(X0_4, AIStateType.Combat)
            || CharacterAIState(X0_4, AIStateType.Alert)
            || CharacterHasStateInfo(X0_4, 436)
            || CharacterHasStateInfo(X0_4, 2)
            || CharacterHasStateInfo(X0_4, 5)
            || CharacterHasStateInfo(X0_4, 6)
            || CharacterHasStateInfo(X0_4, 260)
            || chrAreaSp);
    SetNetworkconnectedThisEventSlot(ON);
    if (chrAreaSp.Passed) {
        WaitFixedTimeSeconds(X8_4);
    }
L1:
    EnableCharacterAI(X0_4);
    ForceAnimationPlayback(X0_4, 20001, false, false, false);
    ChangeCharacterPatrolBehavior(X0_4, 11003397);
    SetSpEffect(X0_4, 5000);
});

$Event(11002402, Restart, function(X0_4, X4_4, X8_4, X12_4, X16_4, X20_4, X24_4, X28_4, X32_4, X36_4) {
    EndIf(SpecialStandbyEndedFlag(X0_4));
    if (X20_4 != 0) {
        DisableCharacterGravity(X0_4);
        SetCharacterMaphit(X0_4, false);
    }
    ForceAnimationPlayback(X0_4, X4_4, true, false, false);
    chrSp = (CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
        || CharacterType(10000, TargetType.Alive)
        || CharacterType(10000, TargetType.GrayPhantom)
        || CharacterType(10000, TargetType.WhitePhantom);
    areaChrSp &= InArea(10000, X12_4)
        && CharacterBackreadStatus(X0_4)
        && (CharacterHasSpEffect(X0_4, 5080) || CharacterHasSpEffect(X0_4, 5450));
    if (!(X24_4 == 0 && X28_4 == 0 && X32_4 == 0 && X36_4 == 0)) {
        if (X24_4 != 0) {
            chr |= CharacterAIState(X0_4, AIStateType.Combat);
        }
        if (X28_4 != 0) {
            chr |= CharacterAIState(X0_4, AIStateType.ActiveAlert);
        }
        if (X32_4 != 0) {
            chr |= CharacterAIState(X0_4, AIStateType.PassiveAlert);
        }
        if (X36_4 != 0) {
            chr |= CharacterAIState(X0_4, AIStateType.Alert);
        }
        areaChrSp &= chr;
    }
L9:
    sp = CharacterHasSpEffect(X0_4, 481)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90110)
        && !CharacterHasSpEffect(X0_4, 90160);
    sp2 = CharacterHasSpEffect(X0_4, 482)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90120)
        && !CharacterHasSpEffect(X0_4, 90160)
        && !CharacterHasSpEffect(X0_4, 90162);
    sp3 = CharacterHasSpEffect(X0_4, 483)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90140)
        && !CharacterHasSpEffect(X0_4, 90160)
        && !CharacterHasSpEffect(X0_4, 90161);
    sp4 = CharacterHasSpEffect(X0_4, 484)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90130)
        && !CharacterHasSpEffect(X0_4, 90161)
        && !CharacterHasSpEffect(X0_4, 90162);
    sp5 = CharacterHasSpEffect(X0_4, 487)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90150)
        && !CharacterHasSpEffect(X0_4, 90160);
    areaChrSp &= chrSp;
    WaitFor(
        areaChrSp
            || HasDamageType(X0_4, 0, DamageType.Unspecified)
            || CharacterHasStateInfo(X0_4, 436)
            || CharacterHasStateInfo(X0_4, 2)
            || CharacterHasStateInfo(X0_4, 5)
            || CharacterHasStateInfo(X0_4, 6)
            || CharacterHasStateInfo(X0_4, 260)
            || sp
            || sp2
            || sp3
            || sp4
            || sp5);
    WaitFixedTimeSeconds(0.1);
    SetNetworkconnectedThisEventSlot(ON);
    SetSpecialStandbyEndedFlag(X0_4, ON);
    if (!(!CharacterHasSpEffect(X0_4, 5080) && !CharacterHasSpEffect(X0_4, 5450))) {
        WaitFixedTimeSeconds(X16_4);
        if (X20_4 != 0) {
            EnableCharacterGravity(X0_4);
            SetCharacterMaphit(X0_4, true);
        }
        ForceAnimationPlayback(X0_4, X8_4, true, false, false);
        EndEvent();
    }
L0:
    if (X20_4 != 0) {
        EnableCharacterGravity(X0_4);
        SetCharacterMaphit(X0_4, true);
    }
    EndEvent();
});

$Event(11002497, Restart, function(X0_4, X4_4, X8_4) {
    EndIf(ThisEventSlot());
    ForceAnimationPlayback(X0_4, 30002, false, false, false);
    chrSp = (CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
        || CharacterType(10000, TargetType.Alive)
        || CharacterType(10000, TargetType.GrayPhantom)
        || CharacterType(10000, TargetType.WhitePhantom);
    area = InArea(10000, X4_4) && EntityInRadiusOfEntity(X0_4, 10000, 20, 1);
    areaChrSp = area && chrSp;
    WaitFor(
        HasDamageType(X0_4, 0, DamageType.Unspecified)
            || CharacterHasStateInfo(X0_4, 436)
            || CharacterHasStateInfo(X0_4, 2)
            || CharacterHasStateInfo(X0_4, 5)
            || CharacterHasStateInfo(X0_4, 6)
            || CharacterHasStateInfo(X0_4, 260)
            || areaChrSp);
    SetNetworkconnectedThisEventSlot(ON);
    if (areaChrSp.Passed) {
        WaitFixedTimeSeconds(X8_4);
    }
L1:
    ForceAnimationPlayback(X0_4, 20002, false, false, false);
});

$Event(11002510, Default, function() {
    InitializeCommonEvent(0, 90005500, 11000510, 11000511, 0, 11001510, 11001511, 11003511, 11001512, 11003512, 11002511, 11002512, 11000512, 11000513, 0);
    InitializeCommonEvent(0, 90005500, 11000940, 11000941, 0, 11001945, 11001941, 11003941, 11001942, 11003942, 11002941, 11002942, 11000942, 11000943, 0);
    InitializeCommonEvent(0, 90005500, 11000515, 11000516, 0, 11001515, 11001516, 11003516, 11001517, 11003517, 11002516, 11002517, 11000517, 11000518, 0);
    InitializeCommonEvent(0, 90005500, 11000520, 11000521, 0, 11001520, 11001521, 11003521, 11001522, 11003522, 11002521, 11002522, 11000522, 11000523, 0);
    InitializeCommonEvent(0, 90005500, 11000525, 11000526, 0, 11001525, 11001526, 11003526, 11001527, 11003527, 11002526, 11002527, 11000527, 11000528, 0);
    if (!EventFlag(300)) {
        InitializeCommonEvent(0, 90005505, 11000530, 11000531, 0, 11001530, 11001531, 11003531, 11001532, 11003532, 11000532, 11000533, 0);
    }
    InitializeCommonEvent(0, 90005505, 11000535, 11000536, 1, 11001535, 11001536, 11003536, 11001537, 11003537, 11000537, 11000538, 0);
    InitializeCommonEvent(0, 90005500, 11000610, 11000611, 2, 11001610, 11001611, 11003611, 11001612, 11003612, 11002611, 11002612, 11000612, 11000613, 0);
});

$Event(11002540, Restart, function() {
    ReproduceAssetAnimation(11001542, 2);
    ReproduceAssetAnimation(11001571, 2);
    ReproduceAssetAnimation(11001572, 2);
    ReproduceAssetAnimation(11001570, 2);
});

$Event(11002546, Restart, function(X0_4, X4_4, X8_4, X12_4, X16_4, X20_4, X24_4) {
    if (EventFlag(X0_4)) {
        DisableObjAct(X8_4, X16_4);
        ReproduceAssetAnimation(X4_4, X24_4);
        DisableObjAct(X4_4, 227012);
        EndEvent();
    }
L0:
    WaitFor(!EventFlag(X0_4) && ObjActEventFlag(X12_4));
    SetNetworkconnectedEventFlagID(X0_4, ON);
    DisableObjAct(X8_4, X16_4);
    ForceAnimationPlayback(X4_4, X20_4, false, false, false);
    DisableObjAct(X4_4, 227012);
});

$Event(11002547, Restart, function() {
    EndIf(EventFlag(11000546));
    WaitFor(EventFlag(11008546));
    SetNetworkconnectedEventFlagID(11000546, ON);
    DisableObjAct(11001547, 1227050);
});

$Event(11002580, Restart, function() {
    RegisterLadder(11000580, 11000581, 11001580);
    RegisterLadder(11000582, 11000583, 11001582);
    RegisterLadder(11000584, 11000585, 11001584);
    RegisterLadder(11000586, 11000587, 11001586);
    RegisterLadder(11000588, 11000589, 11001588);
    RegisterLadder(11000590, 11000591, 11001590);
    RegisterLadder(11000592, 11000593, 11001592);
    RegisterLadder(11000594, 11000595, 11001594);
    RegisterLadder(11000596, 11000597, 11001596);
    
    EnableAssetInvunerability(11008303);
    EnableAssetInvunerability(11008304);
});

$Event(11000600, Restart, function() {
    DisableNetworkSync();
    EndIf(ThisEventSlot());
    WaitFixedTimeFrames(2);
    DisableObjAct(11001536, -1);
    WaitFor(EventFlag(11000535) && !EventFlag(11000537));
    EndIf(ThisEventSlot());
    SetNetworkconnectedThisEventSlot(ON);
    EndEvent();
});

$Event(11002601, Restart, function() {
    WaitFor(EventFlag(11000601));
    ForceAnimationPlayback(10000, 60131, false, false, false);
    SetEventFlagID(9080, ON);
    SetEventFlagID(11000601, OFF);
});

$Event(11002603, Default, function() {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(!EventFlag(11000603));
    WaitFor(EventFlag(11000603) && InArea(10000, 11002500));
    SetCameraAngle(11.9, 1.11);
    SetEventFlagID(11000603, OFF);
});

$Event(11002604, Restart, function() {
    WaitFor(EventFlag(11008556));
    SetEventFlagID(11058556, ON);
});

$Event(11002690, Restart, function() {
    DisableNetworkSync();
    if (!ThisEventSlot()) {
        DeleteMapSFX(11003690, false);
    }
    WaitFor(PlayerInMap(11, 0, -1, -1) && !InArea(10000, 11002690));
    SpawnMapSFX(11003690);
    WaitFixedTimeSeconds(1);
    WaitFor(!PlayerInMap(11, 0, -1, -1) || InArea(10000, 11002690));
    DeleteMapSFX(11003690, true);
    WaitFixedTimeSeconds(1);
    RestartEvent();
});

$Event(11002691, Restart, function(X0_4) {
    EnableAssetInvunerability(X0_4);
});

$Event(11002696, Restart, function() {
    EndIf(EventFlag(11007992));
    WaitFor(PlayerIsInOwnWorld() && ActionButtonInArea(9531, 11001696));
    AwardItemLot(11001010);
    EndEvent();
});

//Tutorial Handler: Marika's Effigy at Roundtable
$Event(11002697, Restart, function() {
    DisableNetworkSync();
    EndIf(!PlayerIsInOwnWorld());
    WaitFor(
        EventFlag(710880)
            && !EventFlag(69480)
            && !EventFlag(2051)
            && !EventFlag(2052)
            && PlayerIsInOwnWorld()
            && !(HasMultiplayerState(MultiplayerState.Multiplayer)
                || HasMultiplayerState(MultiplayerState.MultiplayerPending))
            && !CharacterHasSpEffect(10000, 9640));
    ShowTutorialPopup(1880, true, true);
    if (!EventFlag(69480)) {
        DirectlyGivePlayerItem(ItemType.Goods, 9153, 710880, 1);
    }
    SetEventFlagID(69480, ON);
});

//Tutorial Handler: Duels
$Event(11002698, Restart, function() {
    DisableNetworkSync();
    EndIf(!PlayerIsInOwnWorld());
    WaitFor(
        !EventFlag(710850)
            && InArea(10000, 11002698)
            && PlayerIsInOwnWorld()
            && !(HasMultiplayerState(MultiplayerState.Multiplayer)
                || HasMultiplayerState(MultiplayerState.MultiplayerPending))
            && !CharacterHasSpEffect(10000, 9640));
    SetEventFlagID(710850, ON);
    SetEventFlagID(60350, ON);
    if (!EventFlag(6080)) {
        SetEventFlagID(6080, ON);
        StartPS5Activity(7);
    }
    WaitFixedTimeFrames(1);
    ShowTutorialPopup(1850, true, true);
    if (!EventFlag(69450)) {
        DirectlyGivePlayerItem(ItemType.Goods, 9150, 710850, 1);
    }
    WaitFixedTimeFrames(1);
    SetEventFlagID(69450, ON);
});

$Event(11002699, Default, function() {
    EndIf(EventFlag(11008556));
    if (!HasMultiplayerState(MultiplayerState.Multiplayer)) {
        if (!HasMultiplayerState(MultiplayerState.MultiplayerPending)) {
            EnableObjAct(11001699, 227030);
            WaitFor(
                HasMultiplayerState(MultiplayerState.Multiplayer)
                    || HasMultiplayerState(MultiplayerState.MultiplayerPending));
            DisableObjAct(11001699, 227030);
            RestartEvent();
        }
    }
L0:
    DisableObjAct(11001699, 227030);
    WaitFor(
        !(HasMultiplayerState(MultiplayerState.Multiplayer)
            || HasMultiplayerState(MultiplayerState.MultiplayerPending)));
    EnableObjAct(11001699, 227030);
    RestartEvent();
});

$Event(11002800, Restart, function() {
    EndIf(EventFlag(11000800));
    WaitFor(CharacterHPValue(11000800) <= 0);
    WaitFixedTimeSeconds(4);
    PlaySE(11008000, SoundType.SFX, 888880000);
    WaitFor(CharacterDead(11000800));
    HandleBossDefeatAndDisplayBanner(11000800, TextBannerType.DemigodFelled);
    if (PlayerIsInOwnWorld()) {
        TriggerMultiplayerEvent(0);
    }
    DisableAsset(11001820);
    EnableHit(11004821);
    WaitFixedTimeFrames(1);
    DisableHit(11004820);
    SetEventFlagID(11000800, ON);
    SetEventFlagID(9104, ON);
    if (PlayerIsInOwnWorld()) {
        SetEventFlagID(61104, ON);
    }
    if (!EventFlag(10000850)) {
        SetEventFlagID(10000850, ON);
    }
    if (!EventFlag(9100)) {
        SetEventFlagID(9100, ON);
    }
    if (PlayerIsInOwnWorld()) {
        if (!EventFlag(61100)) {
            SetEventFlagID(61100, ON);
        }
    }
    if (!EventFlag(10000850)) {
        DisableCharacter(10000850);
        DisableCharacterCollision(10000850);
        ForceCharacterDeath(10000850, false);
    }
    EndIf(!PlayerIsInOwnWorld());
    SetPlayerRespawnPoint(11002020);
    SaveRequest();
});

$Event(11002810, Restart, function() {
    if (EventFlag(11000800)) {
        DisableCharacter(11005800);
        DisableCharacterCollision(11005800);
        ForceCharacterDeath(11005800, false);
        DisableAsset(11001820);
        DisableHit(11004820);
        DisableAsset(11006830);
        EndEvent();
    }
L0:
    DisableCharacterAI(11005800);
    EnableCharacterInvincibility(11000800);
    DisableAsset(11001820);
    DisableHit(11004820);
    DisableCharacterCollision(11000800);
    EndIf(
        CharacterType(10000, TargetType.BlackPhantom)
            || CharacterType(10000, TargetType.Invader)
            || CharacterType(10000, TargetType.Invader2)
            || CharacterType(10000, TargetType.Invader3)
            || CharacterType(10000, TargetType.BluePhantom));
    if (!EventFlag(11000801)) {
        WarpCharacterAndCopyFloor(11000800, TargetEntityType.Area, 11002810, -1, 11000800);
        ForceAnimationPlayback(11000800, 30000, false, false, false);
        WaitFor(EventFlag(11002805) && InArea(10000, 11002800));
        if (PlayerIsInOwnWorld()) {
            SendInvadingPhantomsHome(0);
        }
        if (PlayerIsInOwnWorld()) {
            PlayCutsceneToPlayerAndWarp(11000040, CutscenePlayMode.Skippable, 11002812, 11000000, 10000, 0, false);
        } else {
            PlayCutsceneToPlayer(11000040, CutscenePlayMode.Skippable, 10000);
        }
        WaitFixedTimeRealFrames(1);
        SetNetworkconnectedEventFlagID(11000801, ON);
        if (PlayerIsInOwnWorld()) {
            SetCameraAngle(14.42, -37.69);
        }
        DisableAsset(11006830);
        IssueShortWarpRequest(11000800, TargetEntityType.Area, 11002811, -1);
        ForceAnimationPlayback(11000800, 20000, false, false, false);
    } else {
L1:
        DisableAsset(11006830);
        WaitFor(EventFlag(11002805) && InArea(10000, 11002800));
    }
L2:
    EnableCharacterCollision(11000800);
    DisableCharacterInvincibility(11000800);
    EnableCharacterAI(11005800);
    SetNetworkUpdateRate(11005800, true, CharacterUpdateFrequency.AlwaysUpdate);
    DisplayBossHealthBar(Enabled, 11000800, 0, 902130002);
});

$Event(11002811, Restart, function() {
    EndIf(EventFlag(11000800));
    WaitFor(CharacterHasSpEffect(11000800, 16205));
    SetEventFlagID(11002802, ON);
    EnableAsset(11001820);
    EnableHit(11004820);
    WaitFixedTimeFrames(1);
    DisableHit(11004821);
    DisplayBossHealthBar(Enabled, 11000800, 0, 902130003);
});

$Event(11002829, Restart, function() {
    InitializeCommonEvent(0, 9005800, 11000800, 11001800, 11002800, 11002805, 11005800, 10000, 0, 0);
    InitializeCommonEvent(0, 9005801, 11000800, 11001800, 11002800, 11002805, 11002806, 10000);
    InitializeCommonEvent(0, 9005811, 11000501, 11001800, 17, 0);
    InitializeCommonEvent(0, 9005811, 11000800, 11001801, 18, 11000801);
    InitializeCommonEvent(0, 9005822, 11000800, 213001, 11002805, 11002806, 0, 11002802, 0, 0);
});

$Event(11002850, Restart, function() {
    EndIf(EventFlag(11000850));
    WaitFor(CharacterHPValue(11000850) <= 0);
    WaitFixedTimeSeconds(4);
    PlaySE(11008050, SoundType.SFX, 888880000);
    WaitFor(CharacterDead(11000850));
    HandleBossDefeatAndDisplayBanner(11000850, TextBannerType.GreatEnemyFelled);
    SetEventFlagID(11000850, ON);
    SetEventFlagID(11002885, ON); //music handler eventflag
    SetEventFlagID(9105, ON);
    if (PlayerIsInOwnWorld()) {
        SetEventFlagID(61105, ON);
    }
    WaitFixedTimeSeconds(6);
    SetEventFlagID(11002885, OFF); //music handler eventflag
    SetEventFlagID(11002855, OFF); //boss start eventflag OFF
});

$Event(11002860, Restart, function() {
    if (EventFlag(11000850)) {
        DisableCharacter(11000850);
        DisableCharacterCollision(11000850);
        ForceCharacterDeath(11000850, false);
        EnableCharacter(11005858);
        EnableCharacterCollision(11005858);
        EndEvent();
    }
L0:
    DisableCharacterAI(11000850);
    EnableCharacterInvincibility(11000850);
    if (!EventFlag(11000851)) {
        DisableCharacter(11000850);
        WaitFor(
            (PlayerIsInOwnWorld() && EntityInRadiusOfEntity(11000850, 10000, 25, 1))
                || HasDamageType(10000850, 0, DamageType.Unspecified));
        SetNetworkconnectedEventFlagID(11000851, ON);
        IssueShortWarpRequest(11000850, TargetEntityType.Asset, 11001102, 100);
        ForceAnimationPlayback(11000850, 3020, false, false, false);
        EnableCharacter(11000850);
    } else {
L1:
        WaitFor(EventFlag(11002855) && InArea(10000, 11002850));
        IssueShortWarpRequest(11000850, TargetEntityType.Asset, 11001102, 100);
        ForceAnimationPlayback(11000850, 3020, false, false, false);
    }
L2:
    EnableCharacterAI(11000850);
    DisableCharacterInvincibility(11000850);
    SetNetworkUpdateRate(11000850, true, CharacterUpdateFrequency.AlwaysUpdate);
    DisplayBossHealthBar(Enabled, 11000850, 0, 904720002);
});

$Event(11002861, Restart, function() {
    EndIf(EventFlag(11000850));
    WaitFor(HPRatio(11000850) <= 0.7);
    RequestCharacterAIReplan(11000850);
    SetEventFlagID(11002852, ON);
});

$Event(11002862, Restart, function() {
    DisableCharacter(11000855);
    DisableCharacter(11000856);
    DisableCharacter(11000857);
    DisableCharacterCollision(11000855);
    DisableCharacterCollision(11000856);
    DisableCharacterCollision(11000857);
});

$Event(11002859, Restart, function() {
    InitializeCommonEvent(0, 9005800, 11000850, 11001850, 11002850, 11002855, 11005850, 10000, 11000851, 0);
    InitializeCommonEvent(0, 9005801, 11000850, 11001850, 11002850, 11002855, 11002856, 10000);
    InitializeCommonEvent(0, 9005811, 11000850, 11001850, 4, 11000851);
    InitializeCommonEvent(0, 9005811, 11000850, 11001851, 5, 0);
    InitializeCommonEvent(0, 9005811, 11000850, 11001852, 4, 0);
    InitializeCommonEvent(0, 9005811, 11000850, 11001853, 4, 0);
    InitializeCommonEvent(0, 9005811, 11000850, 11001854, 19, 0);
    InitializeCommonEvent(0, 9005811, 11000850, 11001857, 5, 0);
    InitializeCommonEvent(0, 9005811, 11000850, 11001858, 5, 0);
    InitializeCommonEvent(0, 9005811, 11000850, 11001855, 5, 0);
    InitializeCommonEvent(0, 9005822, 11000850, 921600, 11002855, 11002856, 0, 11002852, 0, 0);
});

//Headless Abductor boss death
$Event(11002900, Restart, function() {
    EndIf(EventFlag(11000870));
    WaitFor(CharacterHPValue(11000870) <= 0);
    WaitFixedTimeSeconds(4);
    PlaySE(11000870, SoundType.SFX, 888880000);
    WaitFor(CharacterDead(11000870));
    HandleBossDefeatAndDisplayBanner(11000870, TextBannerType.EnemyFelled);
    AwardItemsIncludingClients(11000105);
    SetSpEffect(10000, 3450);
    SetEventFlagID(11000870, ON);
    if (PlayerIsInOwnWorld()) {
    }
});

//Headless Abductor boss activation
$Event(11002905, Restart, function() {
    if (EventFlag(11000870)) {
        DisableCharacter(11000870);
        DisableCharacterCollision(11000870);
        ForceCharacterDeath(11000870, false);
        EndEvent();
    }
L0:
    DisableCharacterAI(11000870);
    EnableCharacterInvincibility(11000870);
    WaitFor((EventFlag(11002875) || EventFlag(11002877) || EventFlag(11002879)) 
        && InArea(10000, 11002870));
L2:
    EnableCharacterAI(11000870);
    RotateCharacter(11000870, 10000, 3012, false);
    DisableCharacterInvincibility(11000870);
    SetNetworkUpdateRate(11000870, true, CharacterUpdateFrequency.AlwaysUpdate);
    if (CharacterHasSpEffect(10000, 9000000))
        DisplayBossHealthBar(Enabled, 11000870, 0, 904470003);
    else 
        DisplayBossHealthBar(Enabled, 11000870, 0, 904470002);
});

//Headless Abductor boss fogwall handler
$Event(11002889, Restart, function() {
    InitializeCommonEvent(0, 9005800, 11000870, 11001870, 11002870, 11002875, 11005870, 10000, 0, 0);
    InitializeCommonEvent(0, 9005800, 11000870, 11001871, 11002870, 11002877, 11005870, 10000, 0, 0);
    InitializeCommonEvent(0, 9005800, 11000870, 11001872, 11002870, 11002879, 11005870, 10000, 0, 0);
    InitializeCommonEvent(0, 9005801, 11000870, 11001870, 11002870, 11002875, 11002876, 10000);
    InitializeCommonEvent(0, 9005801, 11000870, 11001871, 11002870, 11002877, 11002878, 10000);
    InitializeCommonEvent(0, 9005801, 11000870, 11001872, 11002870, 11002879, 11002880, 10000);
    InitializeCommonEvent(0, 9005811, 11000870, 11001870, 16, 0);
    InitializeCommonEvent(0, 9005811, 11000870, 11001871, 16, 0);
    InitializeCommonEvent(0, 9005811, 11000870, 11001872, 16, 0);
    InitializeCommonEvent(0, 9005822, 11000870, 921200, 11002875, 11002876, 0, 0, 0, 0);
});

// Headless Abductor Playzone Handler - Fogwall flag, stored fogwall Flag, spawnpoint
$Event(11002888, Default, function(X0_4, X4_4, X8_4) {
    EndIf(EventFlag(11000870));
    
    if (!InArea(10000, 11002871) && 
        !InArea(10000, 11002872) && 
        !InArea(10000, 11002873) && 
        !InArea(10000, 11002874)) {
                 
        SetEventFlagID(X4_4, OFF);
        WaitFor(EventFlag(X0_4));
        SetEventFlagID(X4_4, ON);
        EndEvent();
    }
    
    if (EventFlag(X4_4))
        IssueShortWarpRequest(10000, TargetEntityType.Area, X8_4, -1);
});

$Event(11002910, Restart, function() {
    WaitFor(EventFlag(11000800) && EventFlag(130));
    DeleteAssetfollowingSFX(11001920, true);
    CreateAssetfollowingSFX(11001920, 100, 30);
});

$Event(11002920, Default, function(X0_4, X4_4) {
    DisableNetworkSync();
    WaitFor(ActionButtonInArea(7100, X4_4) || EventFlag(X0_4));
    EndIf(EventFlag(X0_4));
    DisplayGenericDialog(10010170, PromptType.OKCANCEL, NumberofOptions.OneButton, X4_4, 3);
    RestartEvent();
});

$Event(11003710, Restart, function(X0_4) {
    DisableNetworkSync();
    WaitFixedTimeFrames(1);
    if (PlayerIsInOwnWorld()) {
        if (EventFlag(3940)) {
            SetEventFlagID(1043379353, OFF);
        }
    }
L0:
    DisableCharacter(X0_4);
    SetCharacterBackreadState(X0_4, true);
    if (!EventFlag(3947)) {
        WaitFor(EventFlag(3947));
        RestartEvent();
    }
L5:
    GotoIf(L1, EventFlag(3940));
    GotoIf(L2, EventFlag(3941));
    GotoIf(L3, EventFlag(3942));
    GotoIf(L4, EventFlag(3943));
L1:
    if (!EventFlag(3957)) {
        if (!EventFlag(11109819)) {
            WaitFor(EventFlag(71102) && EventFlag(9000));
        }
    }
    SetCharacterBackreadState(X0_4, false);
    EnableCharacter(X0_4);
    ForceAnimationPlayback(X0_4, 930010, false, false, false);
    SetNetworkconnectedEventFlagID(11109819, ON);
    SetNetworkconnectedEventFlagID(3957, ON);
    Goto(L20);
L2:
    SetCharacterBackreadState(X0_4, false);
    EnableCharacter(X0_4);
    SetCharacterTeamType(X0_4, TeamType.HostileNPC);
    Goto(L20);
L3:
    SetCharacterBackreadState(X0_4, false);
    EnableCharacter(X0_4);
    SetCharacterTeamType(X0_4, TeamType.HostileNPC);
    Goto(L20);
L4:
    ForceCharacterTreasure(X0_4);
    DisableCharacter(X0_4);
    SetCharacterBackreadState(X0_4, true);
    Goto(L20);
L20:
    WaitFor(!EventFlag(3947));
    RestartEvent();
});

$Event(11003711, Restart, function(X0_4) {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(EventFlag(3943) || !EventFlag(3947) || EventFlag(1039409259));
    WaitFor(EntityInRadiusOfEntity(X0_4, 20000, 4, 1) && CharacterHasSpEffect(20000, 9690));
    SetNetworkconnectedEventFlagID(1039402710, ON);
    EndEvent();
});

$Event(11003715, Restart, function(X0_4) {
    DisableCharacter(X0_4);
    SetCharacterBackreadState(X0_4, true);
    SetCharacterTalkRange(X0_4, 17);
    GotoIf(L0, EventFlag(11000800));
    Goto(L1);
L0:
    SetCharacterTalkRange(X0_4, 120);
    EnableCharacter(X0_4);
    SetCharacterBackreadState(X0_4, false);
    IssueShortWarpRequest(X0_4, TargetEntityType.Area, 11002721, -1);
    ForceAnimationPlayback(X0_4, 930000, false, false, false);
    if (EventFlag(11009405)) {
        ForceAnimationPlayback(X0_4, 930002, false, false, false);
    }
    EndEvent();
L1:
    WaitForEventFlag(ON, TargetEventFlagType.EventFlag, 11000800);
    SetCharacterTalkRange(X0_4, 120);
    EnableCharacter(X0_4);
    SetCharacterBackreadState(X0_4, false);
    IssueShortWarpRequest(X0_4, TargetEntityType.Character, 11000800, 900);
    ForceAnimationPlayback(X0_4, 930000, false, false, false);
    if (EventFlag(11009405)) {
        ForceAnimationPlayback(X0_4, 930002, false, false, false);
    }
    EndEvent();
});

$Event(11003720, Restart, function(X0_4) {
    DisableNetworkSync();
    WaitFixedTimeFrames(1);
    if (PlayerIsInOwnWorld()) {
        if (EventFlag(4200)) {
            SetEventFlagID(1040529253, OFF);
        }
    }
L10:
    DisableCharacter(X0_4);
    SetCharacterBackreadState(X0_4, true);
    if (!(EventFlag(4208) || (EventFlag(4209) && EventFlag(11009554)))) {
        WaitFor(EventFlag(4208) || (EventFlag(4209) && EventFlag(11009554)));
        RestartEvent();
    }
L5:
    GotoIf(L1, EventFlag(4200));
    GotoIf(L2, EventFlag(4201));
    GotoIf(L4, EventFlag(4203));
L1:
    SetCharacterBackreadState(X0_4, false);
    EnableCharacter(X0_4);
    ForceAnimationPlayback(X0_4, 90101, false, false, false);
    GotoIf(L20, mainGroupAbuse);
L2:
    SetCharacterBackreadState(X0_4, false);
    EnableCharacter(X0_4);
    SetCharacterTeamType(X0_4, TeamType.HostileNPC);
    Goto(L20);
L4:
    ForceCharacterTreasure(X0_4);
    DisableCharacter(X0_4);
    SetCharacterBackreadState(X0_4, true);
    Goto(L20);
L20:
    WaitFor(!(EventFlag(4208) || (EventFlag(4209) && EventFlag(11009554))));
    RestartEvent();
});

$Event(11003721, Restart, function(X0_4) {
    DisableNetworkSync();
    WaitFixedTimeFrames(1);
    if (PlayerIsInOwnWorld()) {
    }
L10:
    DisableCharacter(X0_4);
    SetCharacterBackreadState(X0_4, true);
    WaitFor(
        (!EventFlag(4203) && EventFlag(4208))
            || (EventFlag(4203) && !EventFlag(4217) && !EventFlag(1051569454) && !EventFlag(11059304))
            || (!EventFlag(4217) && EventFlag(11009554)));
    SetCharacterBackreadState(X0_4, false);
    EnableCharacter(X0_4);
    ForceAnimationPlayback(X0_4, 930007, false, false, false);
    if (EventFlag(11009555)) {
        ForceAnimationPlayback(X0_4, 930009, false, false, false);
    }
    SetNetworkconnectedEventFlagID(1040549254, OFF);
    SetNetworkconnectedEventFlagID(11009554, ON);
    SetNetworkconnectedEventFlagID(1051569454, OFF);
    SetNetworkconnectedEventFlagID(11059304, OFF);
    WaitFor(
        !((!EventFlag(4203) && EventFlag(4208))
            || (EventFlag(4203) && !EventFlag(4217) && !EventFlag(1051569454) && !EventFlag(11059304))
            || (!EventFlag(4217) && EventFlag(11009554))));
    RestartEvent();
});

$Event(11003722, Restart, function(X0_4) {
    WaitFixedTimeFrames(1);
    EndIf(!PlayerIsInOwnWorld());
    EnableCharacterImmortality(X0_4);
    WaitFor(HasDamageType(X0_4, 10000, DamageType.Unspecified));
    SetNetworkconnectedEventFlagID(1040542710, ON);
    if (EventFlag(11009555)) {
        ForceAnimationPlayback(X0_4, 20014, false, true, true);
    }
    if (!EventFlag(11009555)) {
        ForceAnimationPlayback(X0_4, 20013, false, true, true);
    }
    EndEvent();
});

$Event(11003723, Restart, function(X0_4) {
    if (EventFlag(11009556)) {
        DisableAsset(11001715);
        EndEvent();
    }
    DisableAsset(11001705);
    SetNetworkconnectedEventFlagID(11009468, ON);
    WaitFor(
        EntityInRadiusOfEntity(20000, X0_4, 4, 1)
            && PlayerIsInOwnWorld()
            && CharacterHasSpEffect(20000, 1673014));
    SpawnOneshotSFX(TargetEntityType.Asset, 11001706, -1, 811630);
    ForceAnimationPlayback(11001715, 1, false, false, false);
    EnableAsset(11001705);
    ForceAnimationPlayback(11001705, 1, false, false, false);
    SetNetworkconnectedEventFlagID(11009556, ON);
    SetNetworkconnectedEventFlagID(11009469, ON);
    SetNetworkconnectedEventFlagID(11009468, OFF);
    EndEvent();
});

$Event(11003724, Restart, function() {
    EndIf(!PlayerIsInOwnWorld());
    SetCharacterTalkRange(11000725, 17);
    EndIf(EventFlag(11009460));
    SetCharacterTalkRange(11000725, 160);
    WaitFor(
        EventFlag(4208) && !EventFlag(11009460) && !EventFlag(11002734) && InArea(10000, 11002740));
    SetNetworkconnectedEventFlagID(11002733, ON);
    EndEvent();
});

$Event(11003725, Restart, function(X0_4) {
    WaitFixedTimeFrames(1);
    DisableNetworkSync();
    if (PlayerIsInOwnWorld()) {
        if (EventFlag(4700)) {
            SetEventFlagID(1042369283, OFF);
        }
    }
L10:
    if (!EventFlag(4707)) {
        DisableCharacter(X0_4);
        SetCharacterBackreadState(X0_4, true);
        WaitFor(EventFlag(4707));
        RestartEvent();
    }
L5:
    GotoIf(L1, EventFlag(4700));
    GotoIf(L2, EventFlag(4701));
    GotoIf(L3, EventFlag(4702));
    GotoIf(L4, EventFlag(4703));
L1:
    SetCharacterBackreadState(X0_4, false);
    EnableCharacter(X0_4);
    SetCharacterTeamType(X0_4, TeamType.FriendlyNPC);
    ForceAnimationPlayback(X0_4, 30003, false, false, false);
    GotoIf(L20, mainGroupAbuse);
L2:
    SetCharacterBackreadState(X0_4, false);
    EnableCharacter(X0_4);
    SetCharacterTeamType(X0_4, TeamType.HostileNPC);
    Goto(L20);
L3:
    SetCharacterBackreadState(X0_4, false);
    EnableCharacter(X0_4);
    SetCharacterTeamType(X0_4, TeamType.HostileNPC);
    Goto(L20);
L4:
    ForceCharacterTreasure(X0_4);
    DisableCharacter(X0_4);
    SetCharacterBackreadState(X0_4, true);
    Goto(L20);
L20:
    WaitFor(!EventFlag(4707));
    RestartEvent();
});

$Event(11003730, Restart, function() {
    WaitFixedTimeFrames(1);
    SetEventFlagID(11009500, OFF);
    EndIf(!EventFlag(16009458));
    EndIf(!EventFlag(3886));
    SetEventFlagID(11009500, ON);
    EndEvent();
});

$Event(11003740, Restart, function() {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(!EventFlag(4247));
    WaitForEventFlag(ON, TargetEventFlagType.EventFlag, 1045520180);
    SetNetworkconnectedEventFlagID(35009317, OFF);
    SetNetworkconnectedEventFlagID(35009318, OFF);
    EndEvent();
});

$Event(11003741, Restart, function() {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(!EventFlag(4246));
    WaitFor(
        EventFlag(4240) && EventFlag(35009306) && EntityInRadiusOfEntity(11001957, 20000, 13, 1));
    SetNetworkconnectedEventFlagID(4258, ON);
    EndEvent();
});

//Goldmask Set award during quest
$Event(11003750, Default, function() {
    WaitFor(EventFlag(60848));
    AwardItemLot(105010);
    EndEvent();
});

//Basic Enemy Activation
$Event(11003751, Restart, function(X0_4, X4_4) {
    DisableCharacterAI(X0_4);
    WaitFor(HasDamageType(X0_4, 10000, DamageType.Unspecified) || InArea(10000, X4_4, 1) || EntityInRadiusOfEntity(10000, X0_4, 4, 1)); 
    EnableCharacterAI(X0_4);
    EndEvent();
});
    
// Loop anim while in region - Enemy, Region, Anim, Cooldown (anim frames)
$Event(11003760, Default, function(X0_4, X4_4, X8_4, X12_4) {
    WaitFor(InArea(10000, X4_4));
    ForceAnimationPlayback(X0_4, X8_4, true, true, false);
    WaitFixedTimeFrames(X12_4)
    RestartEvent();
});

// Lightning strike zone - ActivationRegion, SourceRegion, BulletDummy
$Event(11003770, Restart, function(X0_4, X4_4, X8_4) {
    DisableNetworkSync();
    CreateBulletOwner(X8_4);
    WaitFor(InArea(10000, X0_4));
    WaitRandomTimeSeconds(1, 10);
    if (EventFlag(50)) {
        ShootBullet(X8_4, X4_4, 900, 802104200, 0, 0, 0);
    }
    if (EventFlag(51)) {
        ShootBullet(X8_4, X4_4, 900, 802104210, 0, 0, 0);
    }
    if (EventFlag(52)) {
        ShootBullet(X8_4, X4_4, 900, 802104220, 0, 0, 0);
    }
    if (EventFlag(53)) {
        ShootBullet(X8_4, X4_4, 900, 802104230, 0, 0, 0);
    }
    if (EventFlag(54)) {
        ShootBullet(X8_4, X4_4, 900, 802104240, 0, 0, 0);
    }
    if (EventFlag(55)) {
        ShootBullet(X8_4, X4_4, 900, 802104250, 0, 0, 0);
    }
    if (EventFlag(56)) {
        ShootBullet(X8_4, X4_4, 900, 802104260, 0, 0, 0);
    }
    if (EventFlag(57)) {
        ShootBullet(X8_4, X4_4, 900, 802104270, 0, 0, 0);
    }
    WaitFixedTimeSeconds(1);
    RestartEvent();
});

// Funeral Steed Obtaining
$Event(11003780, Restart, function() {
    if (EventFlag(11000858) || EventFlag(63101)) {
        DisableCharacter(11000858);
        EndEvent();
    }
    WaitFor(EventFlag(11000850) && ActionButtonInArea(6256, 11000858));
    
    WaitFixedTimeFrames(20);
    SetSpEffect(11000858, 109500);
    WaitFixedTimeFrames(10);
    
    ForceAnimationPlayback(11000858, 3006, false, false, false);
    WaitFixedTimeFrames(2);
    SpawnOneshotSFX(TargetEntityType.Character, 11000858, 900, 631600);
    SpawnOneshotSFX(TargetEntityType.Character, 11000858, 900, 631510);
    WaitFixedTimeFrames(18);
    SetSpEffect(11000858, 10124);
    ClearSpEffect(11000858, 109500);
    WaitFixedTimeFrames(20);
    DisableCharacter(11000858);
    
    WaitFixedTimeSeconds(1.2);
    AwardItemsIncludingClients(11000505);
    SetEventFlagID(11000858, ON);
    EndEvent();
});
