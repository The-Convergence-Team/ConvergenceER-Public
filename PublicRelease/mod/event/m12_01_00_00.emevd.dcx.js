// ==EMEVD==
// @docs    er-common.emedf.json
// @compress    DCX_KRAK
// @game    Sekiro
// @string    "N:\\GR\\data\\Param\\event\\common_func.emevd\u0000N:\\GR\\data\\Param\\event\\common_macro.emevd\u0000\u0000\u0000\u0000\u0000\u0000"
// @linked    [0,82]
// @version    3.4.2
// ==/EMEVD==

$Event(0, Default, function() {
    RegisterBonfire(71211, 12011951, 0, 0, 0, 5);
    RegisterBonfire(71212, 12011952, 0, 0, 0, 5);
    RegisterBonfire(71213, 12011953, 0, 0, 0, 5);
    RegisterBonfire(71214, 12011954, 0, 0, 0, 5);
    RegisterBonfire(71215, 12011955, 0, 0, 0, 5);
    RegisterBonfire(71216, 12011956, 0, 0, 0, 5);
    RegisterBonfire(71217, 12011957, 0, 0, 0, 5);
    RegisterBonfire(71218, 12011958, 0, 0, 0, 5);
    RegisterBonfire(71219, 12011959, 0, 0, 0, 5);
    InitializeCommonEvent(0, 9005810, 12010800, 71210, 12010950, 12011950, 1084227584);
    InitializeCommonEvent(0, 9005810, 12010805, 12010000, 12010960, 12011960, 1084227584); //guardian grace
    InitializeCommonEvent(0, 90005620, 12010570, 12011570, 12011571, 0, 12012570, 12012571, 12012572);
    InitializeEvent(0, 12012569, 12010570, 12011573);
    InitializeEvent(1, 12012569, 12010570, 12011575);
    InitializeCommonEvent(0, 90005251, 12010201, 1092616192, 0, -1);
    InitializeCommonEvent(0, 90005251, 12010202, 1092616192, 0, -1);
    InitializeCommonEvent(0, 90005251, 12010204, 1092616192, 0, -1);
    InitializeCommonEvent(0, 90005251, 12010207, 1092616192, 0, -1);
    InitializeCommonEvent(0, 90005251, 12010214, 1109393408, 0, -1);
    InitializeCommonEvent(0, 90005201, 12010203, 30001, 20001, 1096810496, 1056964608, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005201, 12010205, 30001, 20001, 1092616192, 1073741824, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005250, 12010210, 12012200, 1056964608, -1);
    InitializeCommonEvent(0, 90005200, 12010211, 30009, 20022, 12012211, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 12010212, 30009, 20022, 12012211, 1092616192, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005251, 12010216, 1077936128, 0, -1);
    InitializeCommonEvent(0, 90005251, 12015210, 1077936128, 1065353216, -1);
    InitializeCommonEvent(0, 90005251, 12015214, 1077936128, 1065353216, -1);
    InitializeCommonEvent(0, 90005201, 12010222, 30001, 20001, 1090519040, 0, 1, 0, 0, 0);
    InitializeCommonEvent(0, 90005300, 12010240, 12010240, 12010105, 1080033280, 0);
    InitializeEvent(0, 12012220, 12010231);
    InitializeEvent(1, 12012220, 12010232);
    InitializeEvent(2, 12012220, 12010233);
    InitializeEvent(3, 12012220, 12010234);
    InitializeEvent(4, 12012220, 12010235);
    InitializeEvent(5, 12012220, 12010236);
    InitializeEvent(6, 12012220, 12010237);
    InitializeEvent(7, 12012220, 12010240);
    InitializeEvent(0, 12012231, 12010231, 0);
    InitializeEvent(1, 12012231, 12010232, 1077936128);
    InitializeEvent(2, 12012231, 12010233, 1086324736);
    InitializeEvent(3, 12012231, 12010234, 1091567616);
    InitializeEvent(4, 12012231, 12010235, 1094713344);
    InitializeEvent(5, 12012231, 12010236, 1094713344);
    InitializeEvent(6, 12012231, 12010237, 1098907648);
    InitializeCommonEvent(0, 90005261, 12010245, 12012245, 1106247680, 0, -1);
    InitializeCommonEvent(0, 90005250, 12010246, 12012246, 1065353216, -1);
    InitializeEvent(0, 12012239, 0);
    InitializeEvent(0, 12012249, 0);
    InitializeEvent(0, 12012240, 0);
    InitializeEvent(0, 12012256, 0);
    InitializeEvent(0, 12012257, 0);
    InitializeEvent(0, 12012288, 12010298, 12010248, 12022298);
    InitializeEvent(1, 12012288, 12010299, 12010249, 12022299);
    InitializeCommonEvent(0, 90005261, 12010251, 12012251, 1092616192, 0, -1);
    InitializeCommonEvent(0, 90005250, 12010260, 12012260, 1056964608, 3006);
    InitializeCommonEvent(0, 90005250, 12010263, 12012260, 0, -1);
    InitializeCommonEvent(0, 90005250, 12010264, 12012260, 0, -1);
    InitializeCommonEvent(0, 90005251, 12010276, 1103626240, 0, -1);
    InitializeCommonEvent(0, 90005261, 12015280, 12012280, 1092616192, 0, -1);
    InitializeCommonEvent(0, 90005200, 12010288, 30000, 20000, 12012288, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 12010289, 30000, 20000, 12012289, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 12010290, 30000, 20000, 12012290, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 12010291, 30000, 20000, 12012290, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 12010292, 30000, 20000, 12012290, 0, 0, 0, 0, 0);
    InitializeEvent(0, 12012301, 0);
    InitializeCommonEvent(0, 90005251, 12010305, 1084227584, 0, -1);
    InitializeCommonEvent(0, 90005200, 12010320, 30001, 20001, 12012320, 1086324736, 0, 0, 0, 0);
    //InitializeCommonEvent(0, 90005200, 12010330, 30000, 20000, 12012330, 0, 0, 0, 0, 0);
    //InitializeCommonEvent(0, 90005200, 12010331, 30000, 20000, 12012330, 1056964608, 0, 0, 0, 0);
    //InitializeCommonEvent(0, 90005200, 12010332, 30000, 20000, 12012330, 1061997773, 0, 0, 0, 0);
    //InitializeCommonEvent(0, 90005200, 12010333, 30000, 20000, 12012330, 1067030938, 0, 0, 0, 0);
    //InitializeCommonEvent(0, 90005200, 12010334, 30000, 20000, 12012330, 1067030938, 0, 0, 0, 0);
    //InitializeCommonEvent(0, 90005200, 12010335, 30000, 20000, 12012330, 1069547520, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005860, 12010850, 0, 12010850, 1, 30600, 0);
    InitializeCommonEvent(0, 9005801, 12010850, 12011617, 12012615, 12012616, 12012617, 10000);
    InitializeCommonEvent(0, 90005870, 12010850, 904650601, 25);
    InitializeCommonEvent(0, 90005201, 12010850, 30000, 20000, 1101004800, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005251, 12010850, 1101004800, 0, -1);
    InitializeCommonEvent(0, 90005251, 12010373, 1094713344, 0, -1);
    InitializeCommonEvent(0, 90005251, 12010375, 1099956224, 0, -1);
    InitializeCommonEvent(0, 90005250, 12010377, 12012377, 0, 3000);
    InitializeCommonEvent(0, 90005250, 12010378, 12012377, 1073741824, 3001);
    InitializeCommonEvent(0, 90005250, 12010379, 12012377, 1073741824, 3001);
    InitializeCommonEvent(0, 90005211, 12010400, 30005, 20005, 12012400, 1106247680, 0, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005300, 12010400, 12010400, 0, 1080033280, 0);
    InitializeCommonEvent(0, 90005300, 12010401, 12010401, 12015995, 1080033280, 0);
    InitializeCommonEvent(0, 90005300, 12010403, 12010403, 40600, 1069547520, 0);
    InitializeCommonEvent(0, 90005300, 12010404, 12010404, 40602, 1069547520, 0);
    InitializeCommonEvent(0, 90005300, 12010420, 12010420, 12015997, 1080033280, 0);
    InitializeCommonEvent(0, 90005201, 12010420, 30002, 20002, 1097859072, 0, 0, 0, 0, 0);
    InitializeEvent(0, 12012421, 0);
    InitializeCommonEvent(0, 90005300, 12010421, 12010421, 0, 1069547520, 0);
    InitializeCommonEvent(0, 90005200, 12010415, 30005, 20005, 12012410, 1067869798, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 12010416, 30005, 20005, 12012410, 1061997773, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 12010417, 30005, 20005, 12012410, 1065353216, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 12010418, 30005, 20005, 12012410, 1058642330, 0, 0, 0, 0);
    InitializeCommonEvent(0, 90005200, 12010419, 30005, 20005, 12012410, 1056964608, 0, 0, 0, 0);
    InitializeEvent(0, 12012800, 0);
    InitializeEvent(0, 12012810, 0);
    InitializeEvent(0, 12012849, 0);
    InitializeEvent(0, 12012820, 0);
    InitializeEvent(0, 12012830, 0);
    InitializeEvent(0, 12012811, 0);
    InitializeEvent(0, 12012812, 0);
    InitializeCommonEvent(0, 90005501, 12010510, 12010511, 2, 12011510, 12011511, 12011512, 12010512);
    InitializeCommonEvent(0, 90005501, 12010515, 12010516, 3, 12011515, 12011516, 12011517, 12010517);
    InitializeCommonEvent(0, 90005501, 12010520, 12010521, 6, 12011520, 12011521, 12011522, 12010522);
    InitializeCommonEvent(0, 90005501, 12010525, 12010526, 9, 12011525, 12011526, 12011527, 12010527);
    InitializeEvent(0, 12010509, 0);
    InitializeEvent(0, 12012506, 0);
    InitializeEvent(0, 12012507, 0);
    InitializeEvent(0, 12012530, 0);
    //InitializeEvent(0, 12012590, 0);
    //InitializeEvent(0, 12012591, 0);
    //InitializeEvent(0, 12012593, 0);
    InitializeEvent(0, 12012594, 0);
    InitializeEvent(0, 12012595, 0);
    InitializeEvent(0, 12012580, 12010590, 105, 12012580, 1101004800, 1120403456);
    InitializeEvent(1, 12012581, 12010591, 105, 12012581, 1120403456, 1137180672);
    InitializeEvent(2, 12012582, 12010593, 105, 12012583, 1120403456, 1137180672);
    InitializeEvent(3, 12012583, 12010594, 105, 12012584, 1120403456, 1137180672);
    InitializeEvent(4, 12012584, 12010595, 105, 12012585, 1108082688, 1125515264);
    InitializeEvent(0, 12010700, 0);
    InitializeEvent(0, 12010701, 0);
    InitializeEvent(0, 12010702, 0);
    InitializeEvent(0, 12010705, 0);
    InitializeEvent(0, 12010706, 0);
    InitializeEvent(0, 12010707, 0);
    InitializeEvent(0, 12010708, 0);
    //InitializeCommonEvent(0, 90005750, 12011710, 4350, 103940, 400394, 400394, 1034509430, 0); //Ranni Doll
    InitializeEvent(0, 12012840, 0);
    InitializeCommonEvent(0, 90005726, 4805, 4806, 4808, 1035469205, 12010705, 12016700);
    InitializeCommonEvent(0, 90005703, 12010705, 4806, 4807, 12019006, 4806, 4805, 4809, 0);
    InitializeCommonEvent(0, 90005704, 12010705, 4806, 4805, 12019006, 3);
    InitializeCommonEvent(0, 90005702, 12010705, 4808, 4805, 4809);
    //Erdtree Warps - Enemy, Obj, Guardian
    InitializeCommonEvent(0, 9005995, 12010750, 12010725, 12010805);
    //Erdtree Boss
    InitializeCommonEvent(0, 90005875, 12010805, 30610, 921000);
    //InitializeEvent(0, 12012055, 0);
    InitializeEvent(0, 12012056, 0);
    InitializeCommonEvent(0, 90005890, 12010805, 12010807, 12010807);
    InitializeCommonEvent(0, 90005891, 12010805, 12010807, 12010808);
    //InitializeCommonEvent(0, 90005870, 12010805, 904810603, 18);
    //InitializeCommonEvent(0, 90005860, 12010805, 0, 12010805, 0, 30610, 0);
    //InitializeCommonEvent(0, 90005251, 12010805, 1101004800, 0, 0);
    //InitializeCommonEvent(0, 90005876, 12010805, 12010807, 904810663, 921000, 12010806);
    //Warp to Sellia
    InitializeEvent(0, 12012860, 0);
    //Warp to Nokstella Gazebo
    InitializeEvent(0, 12012861, 0);
    //Warp to LoR Overlook
    InitializeEvent(0, 12012862, 0);
    //Warp to LoR
    InitializeEvent(0, 12012863, 0);
    
    //Activation scripts (X0_4 = chr entity, X4_4 = activation box id)
    
    ////2 rot ancestor followers with an activation box
    //InitializeEvent(0, 12012870, 12010350, 12012450, 1065353216, 0, -1);
    //InitializeEvent(0, 12012870, 12010351, 12012450, 1065353216, 0, -1);
    ////Flower (2 entities) activation box 3 ids needed
    //InitializeEvent(0, 12012871, 12010352, 12012451, 1065353216, 0, -1);
    //InitializeEvent(0, 12012871, 12010353, 12012451, 1065353216, 0, -1); 
    ////3 Ancestor followers activation box
    //InitializeEvent(0, 12012872, 12010354, 12012454, 1065353216, 0, -1);
    //InitializeEvent(0, 12012872, 12010355, 12012454, 1065353216, 0, -1);
    //InitializeEvent(0, 12012872, 12010356, 12012454, 1065353216, 0, -1);
    ////1 Clean rot knight activation box
    //InitializeEvent(0, 12012873, 12010357, 12012455, 1065353216, 0, -1);
    ////Rotten duelist activation box
    //InitializeEvent(0, 12012874, 12010422, 12012421, 1065353216, 0, -1);
    ////3 enemy activation box
    //InitializeEvent(0, 12012875, 12010358, 12012456, 1065353216, 0, -1);
    //InitializeEvent(0, 12012875, 12010359, 12012456, 1065353216, 0, -1);
    //InitializeEvent(0, 12012875, 12010360, 12012456, 1065353216, 0, -1);
    ////Another clean rot activation
    //InitializeEvent(0, 12012876, 12010361, 12012457, 1065353216, 0, -1);
    
    //Cloister Gate Flame Check
    InitializeEvent(0, 12012600, 0);
    InitializeEvent(0, 12012601, 12010600, 12011600, 12011610);
    InitializeEvent(1, 12012601, 12010601, 12011601, 12011611);
    InitializeEvent(2, 12012601, 12010602, 12011602, 12011612);
    InitializeEvent(0, 12012602, 12010603, 12011603, 12011613);
    
    //Breakable Floor
    InitializeEvent(0, 12012610, 0);
    
    //Dragonkin Fogwall
    InitializeEvent(0, 12012615, 0);
    
    //Raisable Platform A
    InitializeEvent(0, 12012590, 0);
    
    //Raisable Platform B
    InitializeEvent(0, 12012591, 0);
    
    //Conditional Enemy Spawns (Raisable Platforms)
    InitializeEvent(0, 12012592, 12010590, 12010330, 12011330);
    InitializeEvent(1, 12012592, 12010590, 12010331, 12011331);
    InitializeEvent(2, 12012592, 12010590, 12010332, 12011332);
    InitializeEvent(3, 12012592, 12010590, 12010333, 12011333);
    InitializeEvent(4, 12012592, 12010590, 12010334, 12011334);
    InitializeEvent(5, 12012592, 12010590, 12010335, 12011335);
    InitializeEvent(6, 12012592, 12010590, 12010336, 12011336);
    InitializeEvent(7, 12012592, 12010591, 12010337, 12011337);
    InitializeEvent(8, 12012592, 12010591, 12010338, 12011338);
    InitializeEvent(9, 12012592, 12010591, 12010339, 12011339);
    InitializeEvent(10, 12012592, 12010591, 12010340, 12011340);
    InitializeEvent(11, 12012592, 12010591, 12010341, 12011341);
    InitializeEvent(12, 12012592, 12010591, 12010342, 12011342);
    InitializeEvent(13, 12012592, 12010591, 12010343, 12011343);
    
    //Rot Geysers
    InitializeEvent(0, 12012593, 12011344, 2);
    InitializeEvent(1, 12012593, 12011345, 4);
    InitializeEvent(2, 12012593, 12011346, 6);
    InitializeEvent(3, 12012593, 12011347, 8);
    InitializeEvent(4, 12012593, 12011348, 5);
    InitializeEvent(5, 12012593, 12011349, 4);
    InitializeEvent(6, 12012593, 12011350, 2);
    InitializeEvent(7, 12012593, 12011351, 6);
    InitializeEvent(8, 12012593, 12011352, 4);
    InitializeEvent(9, 12012593, 12011353, 2);
    InitializeEvent(10, 12012593, 12011354, 8);
    InitializeEvent(11, 12012593, 12011355, 3);
    
    //Steve
    InitializeCommonEvent(0, 20005400, 12010630);
    InitializeCommonEvent(0, 20000343, 12011630, 120106320, 12010935);
    
    //Boss Anim Debug
    InitializeEvent(0, 12012594, 0);
    
    //Scion Boss Scripts
    //Phase Change Script
    InitializeEvent(0, 12012850, 0);
    //Defeat Event
    InitializeEvent(0, 12012851, 0);
    //Activation Events
    InitializeEvent(0, 12012852, 0);
    //Fogwall and Music
    InitializeEvent(0, 12012853, 0);
    //Save Quit zone
    InitializeEvent(0, 12012854, 0);
    //Something
    InitializeCommonEvent(0, 90005646, 34110800, 34112840, 34112841, 34111840, 1049410300, 2699580);
    
    InitializeCommonEvent(0, 90005250, 12010344, 12010345, 0, -1); //Rot NPC trigger box
    InitializeCommonEvent(0, 90005300, 12010344, 12010344, 105800, 0, 0); // Rot NPC reward
});

$Event(50, Default, function() {
    InitializeEvent(0, 12010519, 0);
    InitializeEvent(0, 12012050, 0);
    SetCharacterBackreadState(12010715, true);
    SetCharacterBackreadState(12010720, true);
});

$Event(12010700, Restart, function() {
    EndIf(!PlayerIsInOwnWorld());
    WaitFor(
        EntityInRadiusOfEntity(10000, 12010711, 3, 1)
            || EntityInRadiusOfEntity(10000, 12010712, 3, 1)
            || EntityInRadiusOfEntity(10000, 12010713, 3, 1));
    SetEventFlagID(12012710, ON);
    WaitFor(
        !EntityInRadiusOfEntity(10000, 12010711, 3, 1)
            && !EntityInRadiusOfEntity(10000, 12010712, 3, 1)
            && !EntityInRadiusOfEntity(10000, 12010713, 3, 1));
    SetEventFlagID(12012710, OFF);
    RestartEvent();
});

$Event(12010701, Restart, function() {
    EndIf(!PlayerIsInOwnWorld());
    WaitFor(
        EntityInRadiusOfEntity(10000, 12010712, 3, 1)
            || EntityInRadiusOfEntity(10000, 12010713, 3, 1));
    SetEventFlagID(12012711, ON);
    WaitFor(
        !EntityInRadiusOfEntity(10000, 12010712, 3, 1)
            && !EntityInRadiusOfEntity(10000, 12010713, 3, 1));
    SetEventFlagID(12012711, OFF);
    RestartEvent();
});

$Event(12010702, Restart, function() {
    EndIf(!PlayerIsInOwnWorld());
    WaitFor(EntityInRadiusOfEntity(10000, 12010713, 3, 1));
    SetEventFlagID(12012712, ON);
    WaitFor(!EntityInRadiusOfEntity(10000, 12010713, 3, 1));
    SetEventFlagID(12012712, OFF);
    RestartEvent();
});

$Event(12010705, Restart, function() {
    SetCharacterBackreadState(12010715, true);
    if (!EventFlag(12012715)) {
        if (EventFlag(12019280)) {
            ForceCharacterDeath(12010715, false);
            EndEvent();
        }
        WaitFor(
            EventFlag(12019257)
                && PlayerIsInOwnWorld()
                && EntityInRadiusOfEntity(20000, 12010715, 53, 1));
    }
L0:
    if (PlayerIsInOwnWorld()) {
        SetEventFlagID(12012715, ON);
    }
    SetCharacterBackreadState(12010715, false);
    EnableCharacter(12010715);
    WaitFixedTimeFrames(1);
    ForceAnimationPlayback(12010715, 20039, false, false, false);
    EndEvent();
});

$Event(12010706, Restart, function() {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(EventFlag(12019280));
    WaitFor(CharacterDead(12010715) || CharacterHPValue(12010715) <= 0);
    SetEventFlagID(12019280, ON);
    SetEventFlagID(12012716, ON);
    EndEvent();
});

$Event(12010707, Restart, function() {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(EventFlag(12019280));
    EndIf(EventFlag(12019271));
    SetEventFlagID(12019270, OFF);
    WaitFor(EventFlag(12012715) && EntityInRadiusOfEntity(20000, 12010715, 25, 1));
    SetCharacterTalkRange(12010714, 100);
    SetEventFlagID(12019270, ON);
    WaitFor(ElapsedSeconds(30) || EventFlag(12019280));
    if (!EventFlag(12019280)) {
        SetCharacterTalkRange(12010714, 17);
    }
    EndEvent();
});

$Event(12010708, Restart, function() {
    EndIf(!PlayerIsInOwnWorld());
    EndIf(EventFlag(12019280));
    EndIf(EventFlag(12019273));
    SetEventFlagID(12019272, OFF);
    WaitFor(EventFlag(12019280));
    WarpCharacterAndCopyFloor(12010714, TargetEntityType.Character, 20000, 11, 20000);
    SetCharacterTalkRange(12010714, 100);
    SetEventFlagID(12019272, ON);
    WaitFor(ElapsedSeconds(30));
    SetCharacterTalkRange(12010714, 17);
    EndEvent();
});

$Event(12012050, Restart, function() {
    EndIf(ThisEventSlot());
    SetSpEffect(12010340, 90010);
    SetSpEffect(12010850, 90010);
    SetSpEffect(12010420, 90010);
    SetSpEffect(12010245, 5490);
    WaitFor(PlayerInMap(12, 1, 0, 0));
    DisableAsset(12015650);
});

$Event(12012055, Restart, function() {
    DisableCharacter(12010806);
    DisableCharacterCollision(12010806);
    ForceCharacterDeath(12010806, false);
});

$Event(12012056, Restart, function() {
    if (EventFlag(12010805)) {
        DisableCharacter(12010806);
        DisableCharacterCollision(12010806);
        DisableCharacter(12010805);
        DisableCharacterCollision(12010805);
        EndEvent();
    }
    //SetCharacterInvincibility(12010806, Enabled);
    DisableCharacterAI(12010805);
    EnableCharacterInvincibility(12010805);
    DisableCharacterAI(12010806);
    EnableCharacterInvincibility(12010806);
    CreateReferredDamagePair(12010806, 12010805);
    DisableCharacterHPBarDisplay(12010806);
    WaitFor(InArea(10000, 12010807));
    DisableCharacterInvincibility(12010805);
    DisableCharacterInvincibility(12010806);
    SetNetworkUpdateRate(12010805, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(12010806, true, CharacterUpdateFrequency.AlwaysUpdate);
    WaitFor(ElapsedSeconds(6) 
        || HasDamageType(12010805, 10000, DamageType.Unspecified) || EntityInRadiusOfEntity(12010805, 10000, 4, 1)
        || HasDamageType(12010806, 10000, DamageType.Unspecified) || EntityInRadiusOfEntity(12010806, 10000, 4, 1));
    EnableCharacterAI(12010805);
    EnableCharacterAI(12010806);
    SetBossBGM(921400, BossBGMState.Start);
    DisplayBossHealthBar(Enabled, 12010805, 0, 904810663);
    WaitFor(CompareCharacterHPValue(12010805, Equal, 0));
    //SetCharacterInvincibility(12010806, Disabled);
    ForceCharacterDeath(12010806, false);
});

$Event(12012569, Default, function(X0_4, X4_4) {
    if (EventFlag(X0_4)) {
        DisableAsset(X4_4);
        EndEvent();
    }
L0:
    CreateAssetfollowingSFX(X4_4, 101, 806043);
    WaitFor(PlayerIsInOwnWorld() && EventFlag(X0_4));
    DeleteAssetfollowingSFX(X4_4, true);
    PlaySE(X4_4, SoundType.SFX, 90011);
    WaitFixedTimeSeconds(0.5);
    DisableAsset(X4_4);
});

$Event(12012580, Restart, function(X0_4, X4_4, X8_4, X12_4, X16_4) {
    EndIf(EventFlag(X0_4));
    WaitFor(EventFlag(X0_4));
    WaitFixedTimeSeconds(1);
    SetCameraVibration(103, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
    WaitFixedTimeSeconds(0.7);
    SetCameraVibration(105, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
    WaitFixedTimeSeconds(1);
    SetCameraVibration(106, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
    WaitFixedTimeSeconds(0.9);
    SetCameraVibration(105, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
    WaitFixedTimeSeconds(0.9);
    SetCameraVibration(X4_4, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
    WaitFixedTimeSeconds(0.9);
    SetCameraVibration(105, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
    WaitFixedTimeSeconds(0.8);
    SetCameraVibration(105, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
    WaitFixedTimeSeconds(0.5);
    SetCameraVibration(102, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
});

$Event(12012581, Restart, function(X0_4, X4_4, X8_4, X12_4, X16_4) {
    EndIf(EventFlag(X0_4));
    WaitFor(EventFlag(X0_4));
    WaitFixedTimeSeconds(1);
    SetCameraVibration(103, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
    WaitFixedTimeSeconds(1);
    SetCameraVibration(105, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
    WaitFixedTimeSeconds(0.8);
    SetCameraVibration(X4_4, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
    WaitFixedTimeSeconds(0.6);
    SetCameraVibration(105, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
    WaitFixedTimeSeconds(0.8);
    SetCameraVibration(105, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
    WaitFixedTimeSeconds(1.2);
    SetCameraVibration(105, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
    WaitFixedTimeSeconds(1.5);
    SetCameraVibration(105, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
});

$Event(12012582, Restart, function(X0_4, X4_4, X8_4, X12_4, X16_4) {
    EndIf(EventFlag(X0_4));
    WaitFor(EventFlag(X0_4));
    WaitFixedTimeSeconds(1);
    SetCameraVibration(103, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
    WaitFixedTimeSeconds(1);
    SetCameraVibration(105, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
    WaitFixedTimeSeconds(1.2);
    SetCameraVibration(105, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
    WaitFixedTimeSeconds(1.2);
    SetCameraVibration(X4_4, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
    WaitFixedTimeSeconds(0.5);
    SetCameraVibration(106, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
    WaitFixedTimeSeconds(1.5);
    SetCameraVibration(105, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
    WaitFixedTimeSeconds(1.5);
    SetCameraVibration(102, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
});

$Event(12012583, Restart, function(X0_4, X4_4, X8_4, X12_4, X16_4) {
    EndIf(EventFlag(X0_4));
    WaitFor(EventFlag(X0_4));
    WaitFixedTimeSeconds(1);
    SetCameraVibration(103, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
    WaitFixedTimeSeconds(0.5);
    SetCameraVibration(105, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
    WaitFixedTimeSeconds(0.5);
    SetCameraVibration(X4_4, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
    WaitFixedTimeSeconds(0.5);
    SetCameraVibration(105, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
    WaitFixedTimeSeconds(1);
    SetCameraVibration(105, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
    WaitFixedTimeSeconds(1);
    SetCameraVibration(102, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
    WaitFixedTimeSeconds(0.8);
    SetCameraVibration(102, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
    WaitFixedTimeSeconds(1.2);
    SetCameraVibration(103, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
    WaitFixedTimeSeconds(0.5);
    SetCameraVibration(102, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
});

$Event(12012584, Restart, function(X0_4, X4_4, X8_4, X12_4, X16_4) {
    EndIf(EventFlag(X0_4));
    WaitFor(EventFlag(X0_4));
    WaitFixedTimeSeconds(1);
    SetCameraVibration(105, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
    WaitFixedTimeSeconds(0.5);
    SetCameraVibration(102, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
    WaitFixedTimeSeconds(0.8);
    SetCameraVibration(105, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
    WaitFixedTimeSeconds(0.8);
    SetCameraVibration(105, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
    WaitFixedTimeSeconds(1);
    SetCameraVibration(X4_4, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
    WaitFixedTimeSeconds(1);
    SetCameraVibration(105, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
    WaitFixedTimeSeconds(1.3);
    SetCameraVibration(105, TargetEntityType.Area, X8_4, -1, X12_4, X16_4);
});

//$Event(12012590, Restart, function() {
//    if (EventFlag(12010590)) {
//        ReproduceAssetAnimation(12011590, 2);
//        ReproduceAssetAnimation(12011596, 2);
//        EndEvent();
//    }
//L0:
//    ReproduceAssetAnimation(12011590, 1);
//    ReproduceAssetAnimation(12011596, 0);
//    WaitFor(PlayerIsInOwnWorld() && !EventFlag(12010590) && InArea(10000, 12012590));
//    SetNetworkconnectedEventFlagID(12010590, ON);
//    ForceAnimationPlayback(12011596, 1, false, true, false);
//    WaitFixedTimeSeconds(1);
//    ForceAnimationPlayback(12011590, 0, false, false, false);
//    EndEvent();
//});

//$Event(12012591, Restart, function() {
//    if (EventFlag(12010591)) {
//        ReproduceAssetAnimation(12011591, 2);
//        ReproduceAssetAnimation(12011592, 2);
//        ReproduceAssetAnimation(12011597, 2);
//        EnableHit(12014594);
//        EndEvent();
//    }
//L0:
//    ReproduceAssetAnimation(12011591, 1);
//    ReproduceAssetAnimation(12011592, 1);
//    ReproduceAssetAnimation(12011597, 0);
//    DisableHit(12014594);
//    WaitFor(PlayerIsInOwnWorld() && !EventFlag(12010591) && InArea(10000, 12012591));
//    SetNetworkconnectedEventFlagID(12010591, ON);
//    SetCameraVibration(107, TargetEntityType.Area, 12012581, -1, 50, 100);
//    ForceAnimationPlayback(12011597, 1, false, true, false);
//    WaitFixedTimeSeconds(1);
//    ForceAnimationPlayback(12011591, 0, false, false, false);
//    ForceAnimationPlayback(12011592, 0, false, false, false);
//    EnableHit(12014594);
//    EndEvent();
//});

//$Event(12012593, Restart, function() {
//    if (EventFlag(12010593)) {
//        ReproduceAssetAnimation(12011593, 2);
//        ReproduceAssetAnimation(12011598, 2);
//        EndEvent();
//    }
//L0:
//    ReproduceAssetAnimation(12011593, 1);
//    ReproduceAssetAnimation(12011598, 0);
//    DisableAsset(12011699);
//    DisableAssetTreasure(12011699);
//    WaitFor(PlayerIsInOwnWorld() && !EventFlag(12010593) && InArea(10000, 12012593));
//    SetNetworkconnectedEventFlagID(12010593, ON);
//    ForceAnimationPlayback(12011598, 1, false, true, false);
//    WaitFixedTimeSeconds(1);
//    ForceAnimationPlayback(12011593, 0, false, true, false);
//    EnableAsset(12011699);
//    EnableAssetTreasure(12011699);
//    EndEvent();
//});

//$Event(12012594, Restart, function() {
//    if (EventFlag(12010594)) {
//        ReproduceAssetAnimation(12011594, 2);
//        EndEvent();
//    }
//L0:
//    ReproduceAssetAnimation(12011594, 1);
//    DisableHit(12014591);
//    WaitFor(PlayerIsInOwnWorld() && !EventFlag(12010594) && InArea(10000, 12012594));
//    SetNetworkconnectedEventFlagID(12010594, ON);
//    ForceAnimationPlayback(12011594, 0, false, false, false);
//    EnableHit(12014591);
//    EndEvent();
//});

$Event(12012595, Restart, function() {
    if (EventFlag(12010595)) {
        ReproduceAssetAnimation(12011595, 2);
        ReproduceAssetAnimation(12011599, 2);
        EndEvent();
    }
L0:
    ReproduceAssetAnimation(12011595, 1);
    ReproduceAssetAnimation(12011599, 0);
    WaitFor(PlayerIsInOwnWorld() && !EventFlag(12010595) && InArea(10000, 12012595));
    SetNetworkconnectedEventFlagID(12010595, ON);
    ForceAnimationPlayback(12011599, 1, false, false, false);
    WaitFixedTimeSeconds(1);
    ForceAnimationPlayback(12011595, 0, false, false, false);
    EndEvent();
});

//$Event(12012421, Restart, function() {
//    EndIf(SpecialStandbyEndedFlag(12010421));
//    DisableCharacter(12010421);
//    DisableHit(12014421);
//    chrSp = (CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
//        || CharacterType(10000, TargetType.Alive)
//        || CharacterType(10000, TargetType.BluePhantom)
//        || CharacterType(10000, TargetType.WhitePhantom);
//    sp = CharacterHasSpEffect(12010421, 481)
//        && !CharacterHasSpEffect(12010421, 90100)
//        && !CharacterHasSpEffect(12010421, 90110)
//        && !CharacterHasSpEffect(12010421, 90160);
//    sp2 = CharacterHasSpEffect(12010421, 482)
//        && !CharacterHasSpEffect(12010421, 90100)
//        && !CharacterHasSpEffect(12010421, 90120)
//        && !CharacterHasSpEffect(12010421, 90160)
//        && !CharacterHasSpEffect(12010421, 90162);
//    sp3 = CharacterHasSpEffect(12010421, 483)
//        && !CharacterHasSpEffect(12010421, 90100)
//        && !CharacterHasSpEffect(12010421, 90140)
//        && !CharacterHasSpEffect(12010421, 90160)
//        && !CharacterHasSpEffect(12010421, 90161);
//    sp4 = CharacterHasSpEffect(12010421, 484)
//        && !CharacterHasSpEffect(12010421, 90100)
//        && !CharacterHasSpEffect(12010421, 90130)
//        && !CharacterHasSpEffect(12010421, 90161)
//        && !CharacterHasSpEffect(12010421, 90162);
//    sp5 = CharacterHasSpEffect(12010421, 487)
//        && !CharacterHasSpEffect(12010421, 90100)
//        && !CharacterHasSpEffect(12010421, 90150)
//        && !CharacterHasSpEffect(12010421, 90160);
//    areaFlagChrSp = InArea(10000, 12012421)
//        && EventFlag(12010591)
//        && EventFlag(12010593)
//        && EventFlag(12010594)
//        && chrSp;
//    WaitFor(
//        areaFlagChrSp
//            || HasDamageType(12010421, 0, DamageType.Unspecified)
//            || CharacterHasStateInfo(12010421, 2)
//            || CharacterHasStateInfo(12010421, 5)
//            || CharacterHasStateInfo(12010421, 6)
//            || CharacterHasStateInfo(12010421, 260)
//            || CharacterHasStateInfo(12010421, 436)
//            || sp
//            || sp2
//            || sp3
//            || sp4
//            || sp5);
//    WaitFixedTimeSeconds(0.1);
//    SetNetworkconnectedThisEventSlot(ON);
//    SetSpecialStandbyEndedFlag(12010421, ON);
//    EnableCharacter(12010421);
//    EndEvent();
//});

$Event(12012220, Restart, function(X0_4) {
    EndIf(ThisEventSlot());
    SetThisEventSlot(OFF);
    WaitFor(
        HasDamageType(X0_4, 0, DamageType.Unspecified)
            || CharacterHasStateInfo(X0_4, 436)
            || CharacterHasStateInfo(X0_4, 2)
            || CharacterHasStateInfo(X0_4, 5)
            || CharacterHasStateInfo(X0_4, 6)
            || CharacterHasStateInfo(X0_4, 260)
            || (CharacterHasSpEffect(X0_4, 481)
                && !CharacterHasSpEffect(X0_4, 90100)
                && !CharacterHasSpEffect(X0_4, 90110)
                && !CharacterHasSpEffect(X0_4, 90160))
            || (CharacterHasSpEffect(X0_4, 482)
                && !CharacterHasSpEffect(X0_4, 90100)
                && !CharacterHasSpEffect(X0_4, 90120)
                && !CharacterHasSpEffect(X0_4, 90160)
                && !CharacterHasSpEffect(X0_4, 90162))
            || (CharacterHasSpEffect(X0_4, 483)
                && !CharacterHasSpEffect(X0_4, 90100)
                && !CharacterHasSpEffect(X0_4, 90140)
                && !CharacterHasSpEffect(X0_4, 90160)
                && !CharacterHasSpEffect(X0_4, 90161))
            || (CharacterHasSpEffect(X0_4, 484)
                && !CharacterHasSpEffect(X0_4, 90100)
                && !CharacterHasSpEffect(X0_4, 90130)
                && !CharacterHasSpEffect(X0_4, 90161)
                && !CharacterHasSpEffect(X0_4, 90162))
            || (CharacterHasSpEffect(X0_4, 487)
                && !CharacterHasSpEffect(X0_4, 90100)
                && !CharacterHasSpEffect(X0_4, 90150)
                && !CharacterHasSpEffect(X0_4, 90160)));
    SetEventFlagID(12012230, ON);
});

$Event(12012231, Restart, function(X0_4, X4_4) {
    EndIf(SpecialStandbyEndedFlag(X0_4));
    DisableCharacterGravity(X0_4);
    SetSpEffect(X0_4, 2900);
    ForceAnimationPlayback(X0_4, 30001, true, false, false);
    WaitFor(HasDamageType(X0_4, 0, DamageType.Unspecified) || EventFlag(12012230));
    WaitFixedTimeSeconds(0.1);
    SetNetworkconnectedThisEventSlot(ON);
    SetSpecialStandbyEndedFlag(X0_4, ON);
    if (!(!CharacterHasSpEffect(X0_4, 5080) && !CharacterHasSpEffect(X0_4, 5450))) {
        WaitFixedTimeSeconds(X4_4);
        EnableCharacterGravity(X0_4);
        ForceAnimationPlayback(X0_4, 20001, true, false, false);
        EndEvent();
    }
L0:
    EnableCharacterGravity(X0_4);
    EndEvent();
});

$Event(12012249, Restart, function() {
    if (EventFlag(12012247) || EventFlag(12012249)) {
        ForceAnimationPlayback(12010247, 20003, false, false, false);
        EndEvent();
    }
L0:
    DisableCharacterAI(12010247);
    WaitFor(
        (HasDamageType(12010247, 0, DamageType.Unspecified)
            || CharacterHasStateInfo(12010247, 436)
            || CharacterHasStateInfo(12010247, 2)
            || CharacterHasStateInfo(12010247, 5)
            || CharacterHasStateInfo(12010247, 6)
            || CharacterHasStateInfo(12010247, 260))
            && !EventFlag(12012247));
    SetNetworkconnectedEventFlagID(12012249, ON);
    EnableCharacterAI(12010247);
});

$Event(12012239, Restart, function() {
    WaitFor(InArea(12010245, 12012239));
    SetSpEffect(12010245, 16318);
    WaitFixedTimeSeconds(1);
    WaitFor(!InArea(12010245, 12012239));
    SetSpEffect(12010245, 16319);
    WaitFixedTimeSeconds(1);
    RestartEvent();
});

$Event(12012240, Restart, function() {
    EndIf(EventFlag(12012249));
    EndIf(EventFlag(12012247));
    WaitFor(InArea(10000, 12012247) && !EventFlag(12012249));
    WaitFixedTimeSeconds(1);
    if (!EventFlag(12012240)) {
        InvokeEnemyGenerator(12013240);
        SetNetworkconnectedEventFlagID(12012240, ON);
        WaitFixedTimeSeconds(3);
        DisableGenerator(12013240);
    } else {
L0:
        if (!EventFlag(12012241)) {
            InvokeEnemyGenerator(12013241);
            SetNetworkconnectedEventFlagID(12012241, ON);
            WaitFixedTimeSeconds(8);
            DisableGenerator(12013241);
        } else {
L1:
            if (!EventFlag(12012242)) {
                InvokeEnemyGenerator(12013242);
                SetNetworkconnectedEventFlagID(12012242, ON);
                WaitFixedTimeSeconds(5);
                DisableGenerator(12013242);
            } else {
L2:
                if (!EventFlag(12012243)) {
                    InvokeEnemyGenerator(12013243);
                    SetNetworkconnectedEventFlagID(12012243, ON);
                    WaitFixedTimeSeconds(5);
                    DisableGenerator(12013243);
                } else {
L3:
                    if (!EventFlag(12012244)) {
                        InvokeEnemyGenerator(12013244);
                        SetNetworkconnectedEventFlagID(12012244, ON);
                        WaitFixedTimeSeconds(8);
                        DisableGenerator(12013244);
                    } else {
L4:
                        if (!EventFlag(12012245)) {
                            InvokeEnemyGenerator(12013245);
                            SetNetworkconnectedEventFlagID(12012245, ON);
                            WaitFixedTimeSeconds(8);
                            DisableGenerator(12013245);
                        } else {
L5:
                            if (!EventFlag(12012246)) {
                                InvokeEnemyGenerator(12013246);
                                SetNetworkconnectedEventFlagID(12012246, ON);
                                WaitFixedTimeSeconds(3);
                                DisableGenerator(12013246);
                            } else {
L6:
                                GotoIf(L1, EventFlag(12012247));
                                InvokeEnemyGenerator(12013247);
                                EnableCharacterAI(12010247);
                                ForceAnimationPlayback(12010247, 20003, false, false, false);
                                SetNetworkconnectedEventFlagID(12012247, ON);
                                DisableGenerator(12013247);
                                EndEvent();
                            }
                        }
                    }
                }
            }
        }
    }
L10:
    RestartEvent();
});

$Event(12012256, Restart, function() {
    if (EventFlag(12012256) && !EventFlag(12012257)) {
        ReproduceAssetAnimation(12011256, 0);
        ForceAnimationPlayback(12010256, 20003, false, false, false);
        EndEvent();
    }
L0:
    if (EventFlag(12012256) && EventFlag(12012257)) {
        ReproduceAssetAnimation(12011256, 2);
        EndEvent();
    }
L1:
    ReproduceAssetAnimation(12011256, 2);
    DisableCharacterAI(12010256);
    WaitFor(PlayerIsInOwnWorld() && InArea(10000, 12012256) && !CharacterDead(12010256));
    SetNetworkconnectedEventFlagID(12012256, ON);
    ForceAnimationPlayback(12011256, 3, false, false, false);
    ForceAnimationPlayback(12010256, 20003, false, false, false);
    EnableCharacterAI(12010256);
});

$Event(12012257, Restart, function() {
    EndIf(EventFlag(12012257));
    WaitFor(EventFlag(12012256) && (CharacterDead(12010256) || !InArea(10000, 12012257)));
    SetNetworkconnectedEventFlagID(12012257, ON);
    ForceAnimationPlayback(12011256, 1, false, false, false);
});

$Event(12012288, Restart, function(X0_4, X4_4, X8_4) {
    if (CharacterDead(X4_4)) {
        DisableCharacter(X0_4);
    }
    if (ThisEventSlot() && !PlayerIsInOwnWorld()) {
        DisableCharacter(X0_4);
        DisableCharacterCollision(X0_4);
        EndEvent();
    }
L0:
    if (PlayerIsInOwnWorld()) {
        SetThisEventSlot(OFF);
    }
    DisableCharacter(X4_4);
    DisableCharacterCollision(X4_4);
    WaitFor(CharacterHasSpEffect(X0_4, 16307));
    EnableCharacter(X4_4);
    EnableCharacterCollision(X4_4);
    SetCharacterHome(X4_4, X8_4);
    DisableCharacterCollision(X0_4);
    WaitFixedTimeFrames(5);
    WarpCharacterAndCopyFloor(X4_4, TargetEntityType.Character, X0_4, 900, X0_4);
    ForceAnimationPlayback(X4_4, 63010, false, false, true);
    SetSpEffect(X4_4, 16316);
    WaitFixedTimeSeconds(4.5);
    DisableCharacter(X0_4);
    DisableCharacterCollision(X0_4);
    DisableCharacterAI(X0_4);
    EnableCharacterAI(X4_4);
});

$Event(12012301, Restart, function() {
    if (EventFlag(12012301)) {
        ClearSpEffect(12015301, 8081);
        ClearSpEffect(12015301, 8082);
        EndEvent();
    }
L0:
    SetSpEffect(12015301, 8081);
    SetSpEffect(12015301, 8082);
    WaitFor(InArea(10000, 12012301, 0));
    ClearSpEffect(12015301, 8081);
    ClearSpEffect(12015301, 8082);
    SetNetworkconnectedEventFlagID(12012301, ON);
});

$Event(12012506, Default, function() {
    WaitFor(PlayerIsInOwnWorld() && !EventFlag(12040800) && ActionButtonInArea(9711, 12011506));
    SendInvadingPhantomsHome(0);
    SetEventFlagID(9021, ON);
    if (PlayerIsInOwnWorld()) {
        PlayCutsceneToPlayerAndWarp(12010000, CutscenePlayMode.Skippable, 12042506, 12040000, 10000, 0, false);
        PlayCutsceneToPlayer(12010001, CutscenePlayMode.UnskippableWithFadeOutSkip, 10000);
    } else {
        PlayCutsceneToPlayerAndWarp(12010000, CutscenePlayMode.Skippable, 12042508, 12040000, 10000, 0, false);
        PlayCutsceneToPlayer(12010001, CutscenePlayMode.UnskippableWithFadeOutSkip, 10000);
    }
    WaitFixedTimeRealFrames(1);
    EndEvent();
});

$Event(12012507, Default, function() {
    EndIf(!PlayerIsInOwnWorld());
    WaitFor(PlayerIsInOwnWorld() && EventFlag(12040800) && ActionButtonInArea(9711, 12011506));
    SendAllPhantomsHome();
    WaitFixedTimeSeconds(1);
    SetEventFlagID(9021, ON);
    PlayCutsceneToPlayerAndWarp(12010000, CutscenePlayMode.Skippable, 12042506, 12040000, 10000, 0, false);
    PlayCutsceneToPlayer(12010001, CutscenePlayMode.UnskippableWithFadeOutSkip, 10000);
    EndEvent();
});

$Event(12010509, Default, function() {
    InitializeCommonEvent(0, 90005500, 12010510, 12010511, 2, 12011510, 12011511, 12013511, 12011512, 12013512, 12012511, 12012512, 12010512, 12010513, 0);
    InitializeCommonEvent(0, 90005500, 12010515, 12010516, 3, 12011515, 12011516, 12013516, 12011517, 12013517, 12012516, 12012517, 12010517, 12010518, 0);
    InitializeCommonEvent(0, 90005500, 12010520, 12010521, 6, 12011520, 12011521, 12013521, 12011522, 12013522, 12012521, 12012522, 12010522, 12010523, 0);
    InitializeCommonEvent(0, 90005500, 12010525, 12010526, 9, 12011525, 12011526, 12013526, 12011527, 12013527, 12012526, 12012527, 12010527, 12010528, 0);
});

$Event(12010519, Default, function() {
    EndIf(ThisEventSlot());
    SetEventFlagID(12010510, ON);
    SetEventFlagID(12010515, ON);
    SetEventFlagID(12010520, ON);
    SetEventFlagID(12010525, ON);
});

$Event(12012530, Restart, function() {
    RegisterLadder(12010530, 12010531, 12011530);
    RegisterLadder(12010532, 12010533, 12011532);
});

$Event(12012800, Restart, function() {
    EndIf(EventFlag(12010800));
    WaitFor(CharacterHPValue(12010800) <= 0);
    ForceCharacterDeath(12010801, false);
    ForceCharacterDeath(12010802, false);
    WaitFixedTimeSeconds(4);
    PlaySE(12010800, SoundType.SFX, 888880000);
    WaitFor(CharacterDead(12010800));
    HandleBossDefeatAndDisplayBanner(12010800, TextBannerType.GreatEnemyFelled);
    SetEventFlagID(12010800, ON);
    SetEventFlagID(9109, ON);
    if (PlayerIsInOwnWorld()) {
        SetEventFlagID(61109, ON);
    }
});

$Event(12012810, Restart, function() {
    if (EventFlag(12010800)) {
        DisableCharacter(12010800);
        DisableCharacterCollision(12010800);
        ForceCharacterDeath(12010800, false);
        DisableCharacter(12010801);
        DisableCharacterCollision(12010801);
        ForceCharacterDeath(12010801, false);
        DisableCharacter(12010802);
        DisableCharacterCollision(12010802);
        ForceCharacterDeath(12010802, false);
        EndEvent();
    }
L0:
    DisableCharacterAI(12010801);
    DisableCharacterAI(12010802);
    DisableCharacterHPBarDisplay(12010801);
    DisableCharacterHPBarDisplay(12010802);
    CreateReferredDamagePair(12010801, 12010800);
    CreateReferredDamagePair(12010802, 12010800);
    EnableCharacterImmortality(12010801);
    EnableCharacterImmortality(12010802);
    DisableCharacterGravity(12010800);
    DisableCharacterCollision(12010800);
    DisableCharacter(12010802);
    ForceAnimationPlayback(12010801, 30002, true, false, false);
    if (!EventFlag(12010801)) {
        DisableCharacter(12010800);
        DisableCharacter(12010801);
        WaitFor(
            (PlayerIsInOwnWorld()
                && InArea(10000, 12012801)
                && CharacterBackreadStatus(12010801)
                && ((CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
                    || CharacterType(10000, TargetType.Alive)
                    || CharacterType(10000, TargetType.GrayPhantom)
                    || CharacterType(10000, TargetType.WhitePhantom)))
                || HasDamageType(12010801, 0, DamageType.Unspecified)
                || CharacterHasStateInfo(12010801, 436)
                || CharacterHasStateInfo(12010801, 2)
                || CharacterHasStateInfo(12010801, 5)
                || CharacterHasStateInfo(12010801, 6)
                || CharacterHasStateInfo(12010801, 260));
        WaitFixedTimeSeconds(0.1);
        EnableCharacter(12010800);
        EnableCharacter(12010801);
        ForceAnimationPlayback(12010801, 20002, false, false, false);
    } else {
L1:
        WaitFor(EventFlag(12012805) && InArea(10000, 12012800));
        ForceAnimationPlayback(12010801, 20002, false, false, false);
    }
L2:
    WaitFixedTimeSeconds(3);
    SetNetworkconnectedEventFlagID(12010840, ON);
    WaitFixedTimeSeconds(2);
    SetNetworkconnectedEventFlagID(12012803, ON);
    WaitFixedTimeSeconds(0.1);
    SetNetworkconnectedEventFlagID(12010801, ON);
    EnableCharacterAI(12010801);
    SetNetworkUpdateRate(12010801, true, CharacterUpdateFrequency.AlwaysUpdate);
    DisplayBossHealthBar(Enabled, 12010800, 0, 904650000);
});

$Event(12012820, Restart, function() {
    EndIf(EventFlag(12010800));
    WaitFor(
        EntityInRadiusOfEntity(12010802, 10000, 50, 1) && CharacterHasSpEffect(12010802, 13208));
    ChangeCamera(-1, 4651);
    WaitFixedTimeFrames(1);
    RestartEvent();
});

$Event(12012830, Restart, function() {
    EndIf(EventFlag(12010800));
    DisableNetworkSync();
    WaitFor(
        EntityInRadiusOfEntity(12010802, 10000, 50, 1) && !CharacterHasSpEffect(12010802, 13208));
    ChangeCamera(-1, 4650);
    WaitFixedTimeFrames(1);
    RestartEvent();
});

$Event(12012840, Restart, function() {
    DisableAsset(12011710);
    DisableAssetTreasure(12011710);
    EndIf(EventFlag(400394));
    WaitFor(EventFlag(1034509430));
    EnableAsset(12011710);
    EnableAssetTreasure(12011710);
    EndEvent();
});


$Event(12012811, Restart, function() {
    EndIf(EventFlag(12010800));
    WaitFor(CharacterHasSpEffect(12010801, 13209));
    SetEventFlagID(12012811, ON);
    SetEventFlagID(12012802, ON);
    EnableCharacter(12010802);
    DisableCharacterCollision(12010802);
    EnableCharacterAI(12010802);
    SetNetworkUpdateRate(12010802, true, CharacterUpdateFrequency.AlwaysUpdate);
    IssueShortWarpRequest(12010802, TargetEntityType.Character, 12010801, 100);
    WaitFixedTimeFrames(90);
    DisableCharacter(12010801);
    EnableCharacterCollision(12010802);
});

$Event(12012812, Restart, function() {
    EndIf(EventFlag(12010800));
    WaitFor(InArea(10000, 12012812));
    SetNetworkUpdateRate(12010800, true, CharacterUpdateFrequency.AlwaysUpdate);
    SetNetworkUpdateRate(12010801, true, CharacterUpdateFrequency.AlwaysUpdate);
});

$Event(12012849, Restart, function() {
    InitializeCommonEvent(0, 9005811, 12010800, 12011801, 4, 12010840);
    InitializeCommonEvent(0, 9005822, 12010800, 920300, 12012805, 12012806, 12012803, 12012802, 0, 0);
    InitializeCommonEvent(0, 9005800, 12010800, 12011800, 12012800, 12012805, 12015800, 10000, 12010801, 12012801);
    InitializeCommonEvent(0, 9005801, 12010800, 12011800, 12012800, 12012805, 12012806, 10000);
    InitializeCommonEvent(0, 9005811, 12010800, 12011800, 5, 12010801);
    InitializeCommonEvent(0, 9005822, 12010800, 920300, 12012805, 12012806, 12012803, 12012802, 0, 0);
});

$Event(12012860, Restart, function() {
    CreateAssetfollowingSFX(12010875, 200, 806870);
    IfActionButtonInArea(MAIN, 9140, 12010875);
    RotateCharacter(10000, 12010875, -1, true);
    ForceAnimationPlayback(10000, 60490, false, false, false, Equal, 1);
    WaitFixedTimeSeconds(3);
    WarpPlayer(60, 49, 39, 0, 1049390876, 60);
    RestartEvent();
});

$Event(12012861, Restart, function() {
    WaitFor(EventFlag(12010800));
    CreateAssetfollowingSFX(12010880, 200, 806870);
    IfActionButtonInArea(MAIN, 9140, 12010880);
    RotateCharacter(10000, 12010880, -1, true);
    ForceAnimationPlayback(10000, 60490, false, false, false, Equal, 1);
    WaitFixedTimeSeconds(3);
    WarpPlayer(12, 1, 0, 0, 12010881, 60);
    RestartEvent();
});

$Event(12012862, Restart, function() {
    CreateAssetfollowingSFX(12011660, 200, 806870);
    IfActionButtonInArea(MAIN, 9140, 12011660);
    RotateCharacter(10000, 12011660, -1, true);
    ForceAnimationPlayback(10000, 60490, false, false, false, Equal, 1);
    WaitFixedTimeSeconds(3);
    WarpPlayer(12, 1, 0, 0, 12011661, 60);
    RestartEvent();
});

$Event(12012863, Restart, function() {
    CreateAssetfollowingSFX(12011662, 200, 806870);
    IfActionButtonInArea(MAIN, 9140, 12011662);
    RotateCharacter(10000, 12011662, -1, true);
    ForceAnimationPlayback(10000, 60490, false, false, false, Equal, 1);
    WaitFixedTimeSeconds(3);
    WarpPlayer(12, 1, 0, 0, 12011663, 60);
    RestartEvent();
});

$Event(12012870, Restart, function(X0_4, X4_4, X8_4, X12_4, X16_4) {
    EndIf(ThisEventSlot());
    SetCharacterAIState(X0_4, Disabled);
    chrSp = (CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
        || CharacterType(10000, TargetType.Alive)
        || CharacterType(10000, TargetType.BluePhantom)
        || CharacterType(10000, TargetType.WhitePhantom);
    sp = CharacterHasSpEffect(X0_4, 481)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90110)
        && !CharacterHasSpEffect(X0_4, 90160);
    sp2 = CharacterHasSpEffect(X0_4, 482)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90120)
        && !CharacterHasSpEffect(X0_4, 90160)
        && !CharacterHasSpEffect(X0_4, 90162);
    sp3 = CharacterHasSpEffect(X0_4, 483)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90140)
        && !CharacterHasSpEffect(X0_4, 90160)
        && !CharacterHasSpEffect(X0_4, 90161);
    sp4 = CharacterHasSpEffect(X0_4, 484)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90130)
        && !CharacterHasSpEffect(X0_4, 90161)
        && !CharacterHasSpEffect(X0_4, 90162);
    sp5 = CharacterHasSpEffect(X0_4, 487)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90150)
        && !CharacterHasSpEffect(X0_4, 90160);
    area = InArea(10000, X4_4) || EntityInRadiusOfEntity(10000, X0_4, X8_4, 1);
    areaChrSp = area && chrSp;
    WaitFor(
        HasDamageType(X0_4, 0, DamageType.Unspecified)
            || CharacterHasStateInfo(X0_4, 436)
            || CharacterHasStateInfo(X0_4, 2)
            || CharacterHasStateInfo(X0_4, 5)
            || CharacterHasStateInfo(X0_4, 6)
            || CharacterHasStateInfo(X0_4, 260)
            || areaChrSp
            || sp
            || sp2
            || sp3
            || sp4
            || sp5);
    SetNetworkconnectedEventFlag(TargetEventFlagType.EventIDSlotNumber, 0, ON);
    if (areaChrSp.Passed) {
        WaitFixedTimeSeconds(X12_4);
        if (Signed(X16_4) != -1) {
            ForceAnimationPlayback(X0_4, X16_4, true, false, false, Equal, 1);
        }
    }
L1:
    SetCharacterAIState(X0_4, Enabled);
});

$Event(12012871, Restart, function(X0_4, X4_4, X8_4, X12_4, X16_4) {
    EndIf(ThisEventSlot());
    SetCharacterAIState(X0_4, Disabled);
    chrSp = (CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
        || CharacterType(10000, TargetType.Alive)
        || CharacterType(10000, TargetType.BluePhantom)
        || CharacterType(10000, TargetType.WhitePhantom);
    sp = CharacterHasSpEffect(X0_4, 481)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90110)
        && !CharacterHasSpEffect(X0_4, 90160);
    sp2 = CharacterHasSpEffect(X0_4, 482)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90120)
        && !CharacterHasSpEffect(X0_4, 90160)
        && !CharacterHasSpEffect(X0_4, 90162);
    sp3 = CharacterHasSpEffect(X0_4, 483)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90140)
        && !CharacterHasSpEffect(X0_4, 90160)
        && !CharacterHasSpEffect(X0_4, 90161);
    sp4 = CharacterHasSpEffect(X0_4, 484)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90130)
        && !CharacterHasSpEffect(X0_4, 90161)
        && !CharacterHasSpEffect(X0_4, 90162);
    sp5 = CharacterHasSpEffect(X0_4, 487)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90150)
        && !CharacterHasSpEffect(X0_4, 90160);
    area = InArea(10000, X4_4) || EntityInRadiusOfEntity(10000, X0_4, X8_4, 1);
    areaChrSp = area && chrSp;
    WaitFor(
        HasDamageType(X0_4, 0, DamageType.Unspecified)
            || CharacterHasStateInfo(X0_4, 436)
            || CharacterHasStateInfo(X0_4, 2)
            || CharacterHasStateInfo(X0_4, 5)
            || CharacterHasStateInfo(X0_4, 6)
            || CharacterHasStateInfo(X0_4, 260)
            || areaChrSp
            || sp
            || sp2
            || sp3
            || sp4
            || sp5);
    SetNetworkconnectedEventFlag(TargetEventFlagType.EventIDSlotNumber, 0, ON);
    if (areaChrSp.Passed) {
        WaitFixedTimeSeconds(X12_4);
        if (Signed(X16_4) != -1) {
            ForceAnimationPlayback(X0_4, X16_4, true, false, false, Equal, 1);
        }
    }
L1:
    SetCharacterAIState(X0_4, Enabled);
});


$Event(12012872, Restart, function(X0_4, X4_4, X8_4, X12_4, X16_4) {
    EndIf(ThisEventSlot());
    SetCharacterAIState(X0_4, Disabled);
    chrSp = (CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
        || CharacterType(10000, TargetType.Alive)
        || CharacterType(10000, TargetType.BluePhantom)
        || CharacterType(10000, TargetType.WhitePhantom);
    sp = CharacterHasSpEffect(X0_4, 481)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90110)
        && !CharacterHasSpEffect(X0_4, 90160);
    sp2 = CharacterHasSpEffect(X0_4, 482)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90120)
        && !CharacterHasSpEffect(X0_4, 90160)
        && !CharacterHasSpEffect(X0_4, 90162);
    sp3 = CharacterHasSpEffect(X0_4, 483)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90140)
        && !CharacterHasSpEffect(X0_4, 90160)
        && !CharacterHasSpEffect(X0_4, 90161);
    sp4 = CharacterHasSpEffect(X0_4, 484)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90130)
        && !CharacterHasSpEffect(X0_4, 90161)
        && !CharacterHasSpEffect(X0_4, 90162);
    sp5 = CharacterHasSpEffect(X0_4, 487)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90150)
        && !CharacterHasSpEffect(X0_4, 90160);
    area = InArea(10000, X4_4) || EntityInRadiusOfEntity(10000, X0_4, X8_4, 1);
    areaChrSp = area && chrSp;
    WaitFor(
        HasDamageType(X0_4, 0, DamageType.Unspecified)
            || CharacterHasStateInfo(X0_4, 436)
            || CharacterHasStateInfo(X0_4, 2)
            || CharacterHasStateInfo(X0_4, 5)
            || CharacterHasStateInfo(X0_4, 6)
            || CharacterHasStateInfo(X0_4, 260)
            || areaChrSp
            || sp
            || sp2
            || sp3
            || sp4
            || sp5);
    SetNetworkconnectedEventFlag(TargetEventFlagType.EventIDSlotNumber, 0, ON);
    if (areaChrSp.Passed) {
        WaitFixedTimeSeconds(X12_4);
        if (Signed(X16_4) != -1) {
            ForceAnimationPlayback(X0_4, X16_4, true, false, false, Equal, 1);
        }
    }
L1:
    SetCharacterAIState(X0_4, Enabled);
});


$Event(12012873, Restart, function(X0_4, X4_4, X8_4, X12_4, X16_4) {
    EndIf(ThisEventSlot());
    SetCharacterAIState(X0_4, Disabled);
    chrSp = (CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
        || CharacterType(10000, TargetType.Alive)
        || CharacterType(10000, TargetType.BluePhantom)
        || CharacterType(10000, TargetType.WhitePhantom);
    sp = CharacterHasSpEffect(X0_4, 481)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90110)
        && !CharacterHasSpEffect(X0_4, 90160);
    sp2 = CharacterHasSpEffect(X0_4, 482)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90120)
        && !CharacterHasSpEffect(X0_4, 90160)
        && !CharacterHasSpEffect(X0_4, 90162);
    sp3 = CharacterHasSpEffect(X0_4, 483)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90140)
        && !CharacterHasSpEffect(X0_4, 90160)
        && !CharacterHasSpEffect(X0_4, 90161);
    sp4 = CharacterHasSpEffect(X0_4, 484)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90130)
        && !CharacterHasSpEffect(X0_4, 90161)
        && !CharacterHasSpEffect(X0_4, 90162);
    sp5 = CharacterHasSpEffect(X0_4, 487)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90150)
        && !CharacterHasSpEffect(X0_4, 90160);
    area = InArea(10000, X4_4) || EntityInRadiusOfEntity(10000, X0_4, X8_4, 1);
    areaChrSp = area && chrSp;
    WaitFor(
        HasDamageType(X0_4, 0, DamageType.Unspecified)
            || CharacterHasStateInfo(X0_4, 436)
            || CharacterHasStateInfo(X0_4, 2)
            || CharacterHasStateInfo(X0_4, 5)
            || CharacterHasStateInfo(X0_4, 6)
            || CharacterHasStateInfo(X0_4, 260)
            || areaChrSp
            || sp
            || sp2
            || sp3
            || sp4
            || sp5);
    SetNetworkconnectedEventFlag(TargetEventFlagType.EventIDSlotNumber, 0, ON);
    if (areaChrSp.Passed) {
        WaitFixedTimeSeconds(X12_4);
        if (Signed(X16_4) != -1) {
            ForceAnimationPlayback(X0_4, X16_4, true, false, false, Equal, 1);
        }
    }
L1:
    SetCharacterAIState(X0_4, Enabled);
});


$Event(12012874, Restart, function(X0_4, X4_4, X8_4, X12_4, X16_4) {
    EndIf(ThisEventSlot());
    SetCharacterAIState(X0_4, Disabled);
    chrSp = (CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
        || CharacterType(10000, TargetType.Alive)
        || CharacterType(10000, TargetType.BluePhantom)
        || CharacterType(10000, TargetType.WhitePhantom);
    sp = CharacterHasSpEffect(X0_4, 481)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90110)
        && !CharacterHasSpEffect(X0_4, 90160);
    sp2 = CharacterHasSpEffect(X0_4, 482)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90120)
        && !CharacterHasSpEffect(X0_4, 90160)
        && !CharacterHasSpEffect(X0_4, 90162);
    sp3 = CharacterHasSpEffect(X0_4, 483)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90140)
        && !CharacterHasSpEffect(X0_4, 90160)
        && !CharacterHasSpEffect(X0_4, 90161);
    sp4 = CharacterHasSpEffect(X0_4, 484)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90130)
        && !CharacterHasSpEffect(X0_4, 90161)
        && !CharacterHasSpEffect(X0_4, 90162);
    sp5 = CharacterHasSpEffect(X0_4, 487)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90150)
        && !CharacterHasSpEffect(X0_4, 90160);
    area = InArea(10000, X4_4) || EntityInRadiusOfEntity(10000, X0_4, X8_4, 1);
    areaChrSp = area && chrSp;
    WaitFor(
        HasDamageType(X0_4, 0, DamageType.Unspecified)
            || CharacterHasStateInfo(X0_4, 436)
            || CharacterHasStateInfo(X0_4, 2)
            || CharacterHasStateInfo(X0_4, 5)
            || CharacterHasStateInfo(X0_4, 6)
            || CharacterHasStateInfo(X0_4, 260)
            || areaChrSp
            || sp
            || sp2
            || sp3
            || sp4
            || sp5);
    SetNetworkconnectedEventFlag(TargetEventFlagType.EventIDSlotNumber, 0, ON);
    if (areaChrSp.Passed) {
        WaitFixedTimeSeconds(X12_4);
        if (Signed(X16_4) != -1) {
            ForceAnimationPlayback(X0_4, X16_4, true, false, false, Equal, 1);
        }
    }
L1:
    SetCharacterAIState(X0_4, Enabled);
});


$Event(12012875, Restart, function(X0_4, X4_4, X8_4, X12_4, X16_4) {
    EndIf(ThisEventSlot());
    SetCharacterAIState(X0_4, Disabled);
    chrSp = (CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
        || CharacterType(10000, TargetType.Alive)
        || CharacterType(10000, TargetType.BluePhantom)
        || CharacterType(10000, TargetType.WhitePhantom);
    sp = CharacterHasSpEffect(X0_4, 481)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90110)
        && !CharacterHasSpEffect(X0_4, 90160);
    sp2 = CharacterHasSpEffect(X0_4, 482)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90120)
        && !CharacterHasSpEffect(X0_4, 90160)
        && !CharacterHasSpEffect(X0_4, 90162);
    sp3 = CharacterHasSpEffect(X0_4, 483)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90140)
        && !CharacterHasSpEffect(X0_4, 90160)
        && !CharacterHasSpEffect(X0_4, 90161);
    sp4 = CharacterHasSpEffect(X0_4, 484)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90130)
        && !CharacterHasSpEffect(X0_4, 90161)
        && !CharacterHasSpEffect(X0_4, 90162);
    sp5 = CharacterHasSpEffect(X0_4, 487)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90150)
        && !CharacterHasSpEffect(X0_4, 90160);
    area = InArea(10000, X4_4) || EntityInRadiusOfEntity(10000, X0_4, X8_4, 1);
    areaChrSp = area && chrSp;
    WaitFor(
        HasDamageType(X0_4, 0, DamageType.Unspecified)
            || CharacterHasStateInfo(X0_4, 436)
            || CharacterHasStateInfo(X0_4, 2)
            || CharacterHasStateInfo(X0_4, 5)
            || CharacterHasStateInfo(X0_4, 6)
            || CharacterHasStateInfo(X0_4, 260)
            || areaChrSp
            || sp
            || sp2
            || sp3
            || sp4
            || sp5);
    SetNetworkconnectedEventFlag(TargetEventFlagType.EventIDSlotNumber, 0, ON);
    if (areaChrSp.Passed) {
        WaitFixedTimeSeconds(X12_4);
        if (Signed(X16_4) != -1) {
            ForceAnimationPlayback(X0_4, X16_4, true, false, false, Equal, 1);
        }
    }
L1:
    SetCharacterAIState(X0_4, Enabled);
});


$Event(12012876, Restart, function(X0_4, X4_4, X8_4, X12_4, X16_4) {
    EndIf(ThisEventSlot());
    SetCharacterAIState(X0_4, Disabled);
    chrSp = (CharacterType(10000, TargetType.BlackPhantom) && CharacterHasSpEffect(10000, 3710))
        || CharacterType(10000, TargetType.Alive)
        || CharacterType(10000, TargetType.BluePhantom)
        || CharacterType(10000, TargetType.WhitePhantom);
    sp = CharacterHasSpEffect(X0_4, 481)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90110)
        && !CharacterHasSpEffect(X0_4, 90160);
    sp2 = CharacterHasSpEffect(X0_4, 482)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90120)
        && !CharacterHasSpEffect(X0_4, 90160)
        && !CharacterHasSpEffect(X0_4, 90162);
    sp3 = CharacterHasSpEffect(X0_4, 483)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90140)
        && !CharacterHasSpEffect(X0_4, 90160)
        && !CharacterHasSpEffect(X0_4, 90161);
    sp4 = CharacterHasSpEffect(X0_4, 484)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90130)
        && !CharacterHasSpEffect(X0_4, 90161)
        && !CharacterHasSpEffect(X0_4, 90162);
    sp5 = CharacterHasSpEffect(X0_4, 487)
        && !CharacterHasSpEffect(X0_4, 90100)
        && !CharacterHasSpEffect(X0_4, 90150)
        && !CharacterHasSpEffect(X0_4, 90160);
    area = InArea(10000, X4_4) || EntityInRadiusOfEntity(10000, X0_4, X8_4, 1);
    areaChrSp = area && chrSp;
    WaitFor(
        HasDamageType(X0_4, 0, DamageType.Unspecified)
            || CharacterHasStateInfo(X0_4, 436)
            || CharacterHasStateInfo(X0_4, 2)
            || CharacterHasStateInfo(X0_4, 5)
            || CharacterHasStateInfo(X0_4, 6)
            || CharacterHasStateInfo(X0_4, 260)
            || areaChrSp
            || sp
            || sp2
            || sp3
            || sp4
            || sp5);
    SetNetworkconnectedEventFlag(TargetEventFlagType.EventIDSlotNumber, 0, ON);
    if (areaChrSp.Passed) {
        WaitFixedTimeSeconds(X12_4);
        if (Signed(X16_4) != -1) {
            ForceAnimationPlayback(X0_4, X16_4, true, false, false, Equal, 1);
        }
    }
L1:
    SetCharacterAIState(X0_4, Enabled);
});
//Flame Spires Completion Check
$Event(12012600, Restart, function() {
    if (EventFlag(12010604)) {
        ReproduceAssetAnimation(12011604, 2);
        EndEvent();
    }
L0:
    WaitFor(
        EventFlag(12010600)
            && EventFlag(12010601)
            && EventFlag(12010602)
            && EventFlag(12010603));
            SetNetworkconnectedEventFlag(TargetEventFlagType.EventFlag, 12010604, ON);
    WaitFixedTimeSeconds(3);
    DisplayGenericDialog(30015, PromptType.OKCANCEL, NumberofOptions.OneButton, 0, 5);
    ForceAnimationPlayback(12011604, 1, false, false, false, Equal, 1);
});

//Flame Spires Script
$Event(12012601, Restart, function(X0_4, X4_4, X8_4) {
    if (EventFlag(X0_4)) {
        DeleteAssetfollowingSFX(X4_4, true);
        DeleteAssetfollowingSFX(X8_4, true);
        CreateAssetfollowingSFX(X4_4, 200, 812070);
        CreateAssetfollowingSFX(X4_4, 201, 812070);
        CreateAssetfollowingSFX(X8_4, 200, 812070);
        EndEvent();
    }
L0:
    ChangeCharacterCollisionState(10000, Enabled);
    if (PlayerIsInOwnWorld()) {
        WaitFor(ActionButtonInArea(9524, X4_4) && PlayerIsInOwnWorld());
        ChangeCharacterCollisionState(10000, Disabled);
        RotateCharacter(10000, X4_4, -1, true);
        ForceAnimationPlayback(10000, 60010, false, false, false, Equal, 1);
        WaitFixedTimeSeconds(1.3);
        SetNetworkconnectedEventFlag(TargetEventFlagType.EventFlag, X0_4, ON);
        DeleteAssetfollowingSFX(X4_4, true);
        DeleteAssetfollowingSFX(X8_4, true);
        CreateAssetfollowingSFX(X4_4, 200, 812070);
        CreateAssetfollowingSFX(X4_4, 201, 812070);
        CreateAssetfollowingSFX(X8_4, 200, 812070);
        WaitFixedTimeSeconds(1.5);
        ChangeCharacterCollisionState(10000, Enabled);
        EndEvent();
    }
L10:
    WaitFor(EventFlag(X0_4));
    WaitFixedTimeSeconds(1.3);
    DeleteAssetfollowingSFX(X4_4, true);
    DeleteAssetfollowingSFX(X8_4, true);
    CreateAssetfollowingSFX(X4_4, 200, 812070);
    CreateAssetfollowingSFX(X4_4, 201, 812070);
    CreateAssetfollowingSFX(X8_4, 200, 812070);
    EndEvent();
});

//Dragonkin Flame Spire Script
$Event(12012602, Restart, function(X0_4, X4_4, X8_4) {
    if (EventFlag(X0_4)) {
        DeleteAssetfollowingSFX(X4_4, true);
        DeleteAssetfollowingSFX(X8_4, true);
        CreateAssetfollowingSFX(X4_4, 200, 812070);
        CreateAssetfollowingSFX(X4_4, 201, 812070);
        CreateAssetfollowingSFX(X8_4, 200, 812070);
        EndEvent();
    }
L0:
    ChangeCharacterCollisionState(10000, Enabled);
    WaitFor(PlayerIsInOwnWorld() && EventFlag(12010850));
        WaitFor(ActionButtonInArea(9524, X4_4) && PlayerIsInOwnWorld());
        ChangeCharacterCollisionState(10000, Disabled);
        RotateCharacter(10000, X4_4, -1, true);
        ForceAnimationPlayback(10000, 60010, false, false, false, Equal, 1);
        WaitFixedTimeSeconds(1.3);
        SetNetworkconnectedEventFlag(TargetEventFlagType.EventFlag, X0_4, ON);
        DeleteAssetfollowingSFX(X4_4, true);
        DeleteAssetfollowingSFX(X8_4, true);
        CreateAssetfollowingSFX(X4_4, 200, 812070);
        CreateAssetfollowingSFX(X4_4, 201, 812070);
        CreateAssetfollowingSFX(X8_4, 200, 812070);
        WaitFixedTimeSeconds(1.5);
        ChangeCharacterCollisionState(10000, Enabled);
        EndEvent();
L10:
    WaitFor(EventFlag(X0_4));
    WaitFixedTimeSeconds(1.3);
    DeleteAssetfollowingSFX(X4_4, true);
    DeleteAssetfollowingSFX(X8_4, true);
    CreateAssetfollowingSFX(X4_4, 200, 812070);
    CreateAssetfollowingSFX(X4_4, 201, 812070);
    CreateAssetfollowingSFX(X8_4, 200, 812070);
    EndEvent();
});

//Breakable Floor
$Event(12012610, Restart, function() {
    if (EventFlag(12010620)) {
        DisableAsset(12011620);
        EndEvent();
    }
L0:
    WaitFor(PlayerIsInOwnWorld() && InArea(10000, 12012620));
    RequestAssetDestruction(12011620, 1);
    SetEventFlagID(12010620, ON);
});

//Dragonkin Fogwall
$Event(12012615, Restart, function() {
    if (EventFlag(12010850)) {
    ChangeAssetEnableState(12011615, Disabled);
    ChangeAssetEnableState(12011616, Disabled);
    ChangeAssetEnableState(12011617, Disabled);
    EndEvent();
    }
L0:
    SetCharacterInvincibility(12010850, Enabled);
    ChangeAssetEnableState(12011615, Disabled);
    ChangeAssetEnableState(12011616, Disabled);
    ChangeAssetEnableState(12011617, Disabled);
    WaitFor(PlayerIsInOwnWorld() && !EventFlag(12010850) && InArea(10000, 12012615));
    SetNetworkconnectedEventFlagID(12012616, ON);
    ChangeAssetEnableState(12011615, Enabled);
    DeleteAssetfollowingSFX(12011615, true);
    CreateAssetfollowingSFX(12011615, 101, 5);
    ChangeAssetEnableState(12011616, Enabled);
    DeleteAssetfollowingSFX(12011616, true);
    CreateAssetfollowingSFX(12011616, 101, 5);
    ChangeAssetEnableState(12011617, Enabled);
    DeleteAssetfollowingSFX(12011617, true);
    SetCharacterInvincibility(12010850, Disabled);
L10:
    WaitFor(EventFlag(12010850));
    ChangeAssetEnableState(12011615, Disabled);
    ChangeAssetEnableState(12011616, Disabled);
    ChangeAssetEnableState(12011617, Disabled);
    DeleteAssetfollowingSFX(12011615, true);
    DeleteAssetfollowingSFX(12011616, true);
    EndEvent();
});

//Raisable Platforms A
$Event(12012590, Restart, function() {
    //SetNetworkconnectedEventFlag(TargetEventFlagType.EventFlag, 12010590, OFF);
    if (EventFlag(12010590)) {
        ChangeAssetEnableState(12011597, Enabled);
        ChangeAssetEnableState(12011598, Enabled);
        ReproduceAssetAnimation(12011591, 2);
        ReproduceAssetAnimation(12011592, 2);
        ReproduceAssetAnimation(12011593, 2);
        EndEvent();
    }
L0:
    ChangeAssetEnableState(12011597, Disabled);
    ChangeAssetEnableState(12011598, Disabled);
    ReproduceAssetAnimation(12011591, 1);
    ReproduceAssetAnimation(12011592, 1);
    ReproduceAssetAnimation(12011593, 0);
    ChangeAssetEnableState(12011685, Disabled);
    SetAssetTreasureState(12011685, Disabled);
    WaitFor(PlayerIsInOwnWorld() && !EventFlag(12010590) && InArea(10000, 12012590));
    SetNetworkconnectedEventFlag(TargetEventFlagType.EventFlag, 12010590, ON);
    ForceAnimationPlayback(12011593, 1, false, true, false, Equal, 1);
    WaitFixedTimeSeconds(1);
    ForceAnimationPlayback(12011591, 0, false, false, false, Equal, 1);
    ForceAnimationPlayback(12011592, 0, false, true, false, Equal, 1);
    ChangeAssetEnableState(12011597, Enabled);
    ChangeAssetEnableState(12011598, Enabled);
    ChangeAssetEnableState(12011685, Enabled);
    SetAssetTreasureState(12011685, Enabled);
    EndEvent();
});

//Raisable Platforms B
$Event(12012591, Restart, function() {
    //SetNetworkconnectedEventFlag(TargetEventFlagType.EventFlag, 12010591, OFF);
    if (EventFlag(12010591)) {
        ChangeAssetEnableState(12011599, Enabled);
        ReproduceAssetAnimation(12011595, 2);
        ReproduceAssetAnimation(12011596, 2);
        EndEvent();
    }
L0:
    ChangeAssetEnableState(12011599, Disabled);
    ReproduceAssetAnimation(12011595, 1);
    ReproduceAssetAnimation(12011596, 0);
    WaitFor(PlayerIsInOwnWorld() && !EventFlag(12010591) && InArea(10000, 12012591));
    SetNetworkconnectedEventFlag(TargetEventFlagType.EventFlag, 12010591, ON);
    ForceAnimationPlayback(12011596, 1, false, true, false, Equal, 1);
    WaitFixedTimeSeconds(1);
    ForceAnimationPlayback(12011595, 0, false, true, false, Equal, 1);
    ChangeAssetEnableState(12011599, Enabled);
    EndEvent();
});

//Conditional Enemy Spawns (Raisable Platforms)
$Event(12012592, Restart, function(X0_4, X4_4, X8_4) {
    if (EventFlag(X0_4)) {
        IssueShortWarpRequest(X4_4, TargetEntityType.Area, X8_4, -1);
        EndEvent();
    }
});

//Rot Geysers
$Event(12012593, Restart, function(X0_4, X4_4) {
    EnableNetworkSync();
    WaitFixedTimeSeconds(8);
    WaitFor(EntityInRadiusOfEntity(10000, X0_4, 70, 1));
    WaitFixedTimeSeconds(X4_4);
    if (GameCycle() == 0) {
        ShootBullet(12010300, X0_4, -1, 802700000, 0, 0, 0);
    } else if (GameCycle() == 1) {
        ShootBullet(12010300, X0_4, -1, 802700010, 0, 0, 0);
    } else if (GameCycle() == 2) {
        ShootBullet(12010300, X0_4, -1, 802700020, 0, 0, 0);
    } else if (GameCycle() == 3) {
        ShootBullet(12010300, X0_4, -1, 802700030, 0, 0, 0);
    } else if (GameCycle() == 4) {
        ShootBullet(12010300, X0_4, -1, 802700040, 0, 0, 0);
    } else if (GameCycle() == 5) {
        ShootBullet(12010300, X0_4, -1, 802700050, 0, 0, 0);
    } else if (GameCycle() == 6) {
        ShootBullet(12010300, X0_4, -1, 802700060, 0, 0, 0);
    } else if (GameCycle() >= 7) {
        ShootBullet(12010300, X0_4, -1, 802700070, 0, 0, 0);
        Goto(L0);
    }
L0:
    RestartEvent();
});

//Boss Anim Debug
$Event(12012594, Restart, function() {
    EndEvent();
    if (CharacterHasSpEffect(10000, 501012, Equal, 1)) {
    ForceAnimationPlayback(12010810, 3031, false, true, false, Equal, 1);
    }
    RestartEvent();
});

//Phase Change Script
$Event(12012850, Restart, function() {
    EndIf(EventFlag(12010810));
    WaitFor(
        CharacterHPValue(12010811) <= 1
            && !CharacterHasSpEffect(12010811, 18480)
            && HasDamageType(12010811, 0, DamageType.Unspecified));
            
    SetCharacterImmortality(12010811, Enabled);
    SetCharacterAIState(12010812, Disabled);
    SetCharacterInvincibility(12010812, Enabled);
    
    WaitFor(CharacterHPValue(12010811) <= 100)
    
    DisplayBossHealthBar(Disabled, 12010811, 0, 902036001);
    DisableLockOnPoint(12010811, 220);
    DisableCharacterAI(12010811);
    ForceAnimationPlayback(12010811, 3031, false, false, true, Equal, 1);
    //SetBossBGM(212000, BossBGMState.Stop2);
    SetEventFlagID(12012822, ON);
    SetEventFlagID(12012816, OFF);
    
    WaitFor(CharacterHasSpEffect(12010811, 11707, Equal, 1));
    
    EnableCharacter(12010812);
    IssueShortWarpRequest(12010812, TargetEntityType.Character, 12010811, 260);
    SetEventFlagID(12012822, OFF);
    SetEventFlagID(12012813, ON);
    SetEventFlagID(12012820, OFF);
    ForceAnimationPlayback(12010812, 20000, false, false, false, Equal, 1);
    //SetSpEffect(12010810, 100);
    
    DisplayBossHealthBar(Enabled, 12010812, 0, 902036000);
    //SetBossBGM(212000, BossBGMState.HeatUp);
    SetEventFlagID(12012819, ON);
    SetCharacterAIState(12010812, Enabled);
    SetCharacterInvincibility(12010812, Disabled);
    SetCharacterImmortality(12010812, Disabled);
    
    WaitFixedTimeFrames(1);
    IssueShortWarpRequest(12010811, TargetEntityType.Area, 12011810, -1);
    ChangeCharacterEnableState(12010811, Disabled);
});

$Event(12012851, Restart, function() {
    EndIf(EventFlag(12010810));
    WaitFor(CharacterHPValue(12010812) <= 0);
    ForceCharacterDeath(12010812, false);
    WaitFixedTimeSeconds(4);
    PlaySE(12010812, SoundType.SFX, 888880000);
    WaitFor(CharacterDead(12010812));
    HandleBossDefeatAndDisplayBanner(12010812, TextBannerType.LegendFelled);
    //SetBossBGM(212000, BossBGMState.Stop2);
    SetEventFlagID(12012819, OFF);
    SetEventFlagID(12010810, ON);
    SetEventFlagID(12012825, ON); //music handler eventflag
    SetEventFlagID(12012813, OFF);
    SetEventFlagID(12012820, OFF);
    SetEventFlagID(9188, ON);
    SetSpEffect(10000, 3450); // Rune Arc
    if (PlayerIsInOwnWorld()) {
        SetEventFlagID(61188, ON);
    }
    WaitFixedTimeSeconds(6);
    SetEventFlagID(12012825, OFF); //music handler eventflag
});

$Event(12012852, Restart, function() {
    if (EventFlag(12010810)) {
        DisableCharacter(12010810);
        DisableCharacterCollision(12010810);
        ForceCharacterDeath(12010810, false);
        DisableCharacter(12010811);
        DisableCharacterCollision(12010811);
        ForceCharacterDeath(12010811, false);
        DisableCharacter(12010812);
        DisableCharacterCollision(12010812);
        ForceCharacterDeath(12010812, false);
        EndEvent();
    }
L0:
    DisableCharacterAI(12010810);
    DisableCharacterAI(12010811);
    DisableCharacterAI(12010812);
    DisableLockOnPoint(12010811, 220);
    //DisableCharacterHPBarDisplay(12010811);
    //DisableCharacterHPBarDisplay(12010812);
    //CreateReferredDamagePair(12010811, 12010810);
    //CreateReferredDamagePair(12010812, 12010810);
    EnableCharacterImmortality(12010811);
    EnableCharacterImmortality(12010812);
    EnableCharacterImmortality(12010810);
    EnableCharacterInvincibility(12010811);
    DisableCharacterGravity(12010810);
    DisableCharacterCollision(12010810);
    DisableCharacter(12010810);
    DisableCharacter(12010812);
    if (!EventFlag(12010811)) {
        ForceAnimationPlayback(12010811, 700, true, false, false, 0, 1);
        WaitFor(
        (PlayerIsInOwnWorld() && InArea(10000, 12012815))
                || HasDamageType(12010811, 10000, DamageType.Unspecified));
        SetNetworkconnectedEventFlagID(12010811, ON);
        EnableCharacter(12010811);
        ForceAnimationPlayback(12010811, 1700, false, false, false, 0, 1);
    } else {
L1:
        WaitFor((InArea(10000, 12012815)) && EventFlag(12012820));
    }
L2:
    DisableCharacterInvincibility(12010811);
    EnableCharacterImmortality(12010811);
    EnableCharacterAI(12010811);
    EnableLockOnPoint(12010811, 220);
    SetNetworkUpdateRate(12010811, true, CharacterUpdateFrequency.AlwaysUpdate);
    DisplayBossHealthBar(Enabled, 12010811, 0, 902036001);
    //SetBossBGM(212000, BossBGMState.Start);
    SetEventFlagID(12012816, ON);
});

$Event(12012853, Restart, function() {
    InitializeCommonEvent(0, 9005800, 12010810, 12011810, 12012815, 12012820, 12015810, 10000, 12010811, 12012815);
    InitializeCommonEvent(0, 9005801, 12010810, 12011810, 12012815, 12012820, 12012821, 10000);
    InitializeCommonEvent(0, 9005811, 12010810, 12011810, 5, 12010811);
    //InitializeCommonEvent(0, 930000, 12010810, 212000, 12012815, 12012817, 0, 12012813, 0, 0);
    InitializeCommonEvent(0, 9005822, 12010810, 921600, 12012820, 12012821, 0, 12012813, 0, 0);
});

$Event(12012854, Default, function() {
    EndIf(EventFlag(12010810));
    //WaitFixedTimeFrames(1);
    if (InArea(10000, 12012818)) {
        IssueShortWarpRequest(10000, TargetEntityType.Area, 12012817, -1);
        SetCharacterAIState(12010811, Disabled);
        SetCharacterAIState(12010812, Disabled);
    }
});
